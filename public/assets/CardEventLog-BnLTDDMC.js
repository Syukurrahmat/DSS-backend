import{H as j,j as a,T as i,L as B,M as P,K as l,J as w,N as F,P as K,r as R,V as H,a1 as V,a4 as U}from"./createReactComponent-BjMSnX4u.js";import{z as O,d as W,M as $,g as N,h as q,i as G,u as J,E as _,b as Q,f as X,j as Y,O as o,q as D,k as Z,a2 as aa,ah as sa,ai as ea,aj as na,ak as C,m as b,e as ta,a1 as ia}from"./app-Dlg_0vKY.js";import{c as v,B as f,I as ra}from"./axios-DSJo49NX.js";import{H as n,I as oa}from"./icon-CgCgY_AD.js";import{t as m}from"./dateFormating-BW4zoMdD.js";import{c as la,d as da}from"./index.tags-CTXl78sl.js";import{u as ca,h as ha}from"./common.utils-T8z9TsUm.js";import{I as xa}from"./IconMapPin-Cm_Rdr-X.js";import{I as ua}from"./IconTrash-DOqppO8G.js";import{I as ma}from"./IconEdit-Chltx2AE.js";import{M as ja}from"./chunk-4FCEGNGT-Dke9LU8Y.js";import{I as pa}from"./IconCalendar-CF1fZF0p.js";/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ga=j("outline","calendar-event","IconCalendarEvent",[["path",{d:"M4 5m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 3l0 4",key:"svg-1"}],["path",{d:"M8 3l0 4",key:"svg-2"}],["path",{d:"M4 11l16 0",key:"svg-3"}],["path",{d:"M8 15h2v2h-2z",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fa=j("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var A=j("outline","hourglass","IconHourglass",[["path",{d:"M6.5 7h11",key:"svg-0"}],["path",{d:"M6.5 17h11",key:"svg-1"}],["path",{d:"M6 20v-2a6 6 0 1 1 12 0v2a1 1 0 0 1 -1 1h-10a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M6 4v2a6 6 0 1 0 12 0v-2a1 1 0 0 0 -1 -1h-10a1 1 0 0 0 -1 1z",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var va=j("outline","info-hexagon","IconInfoHexagon",[["path",{d:"M19.875 6.27c.7 .398 1.13 1.143 1.125 1.948v7.284c0 .809 -.443 1.555 -1.158 1.948l-6.75 4.27a2.269 2.269 0 0 1 -2.184 0l-6.75 -4.27a2.225 2.225 0 0 1 -1.158 -1.948v-7.285c0 -.809 .443 -1.554 1.158 -1.947l6.75 -3.98a2.33 2.33 0 0 1 2.25 0l6.75 3.98h-.033z",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);function Ba({withCard:s=!0,selectCompanyOnly:t=!0}){return a.jsxs(v,{as:s?ya:void 0,children:[a.jsxs(i,{children:["Pilih perusahaan ",t?"atau Pengguna publik":""," ","yang ingin Anda Lihat"]}),a.jsx(O,{mt:"4",selectCompanyOnly:t,children:t?"Pilih Perusahaan":"Pilih Dasbor"})]})}function ya(s){return a.jsx(v,{children:a.jsxs(B,{children:[a.jsx(P,{pb:"0",children:a.jsxs(n,{children:[a.jsx(l,{as:va,color:"blue.600",boxSize:"28px"}),a.jsx(w,{size:"md",children:"Informasi"})]})}),a.jsx(F,{children:s.children})]})})}function ka({eventId:s,readOnly:t=!1,...r}){const{isOpen:c,onOpen:h,onClose:x}=W();return a.jsxs(a.Fragment,{children:[a.jsx(v,{position:"relative",onClick:h,...r}),a.jsx(K,{children:a.jsxs($,{size:"xl",isOpen:c,onClose:x,children:[a.jsx(N,{}),a.jsxs(q,{children:[a.jsx(ja,{size:"lg"}),a.jsx(G,{children:"Detail kegiatan"}),a.jsx(Ia,{eventId:s,readOnly:t,onClose:x})]})]})})]})}function Ia({eventId:s,onClose:t,readOnly:r}){var M,S;const[c,h]=R.useState(!1),{user:x}=J(),u=ca(),E=_(),y=(S=(M=x.view)==null?void 0:M.company)==null?void 0:S.companyId,p=`/companies/${y}/events/${s}`,{data:e,mutate:L}=Q(p,X),k=()=>ta(d=>typeof d=="string"&&d.startsWith(`/companies/${y}/events`)),T=async()=>{t(),await ha(300),E({title:"Hapus Kegiatan ini",message:"Anda yakin hendak menghapus kegiatan ini dari perusahaan Anda",confirmButtonColor:"red",onConfirm:()=>b.delete(p).then(()=>{u.success("Kegiatan berhasil dihapus"),k()}).catch(()=>{u.error("Kegiatan Gagal dihapus")})})},I=async d=>{h(!0);const g=p+(d=="endnow"?"/completed":"/start-now");b.patch(g).then(()=>{u.success("Kegiatan berhasil diupdate"),k(),L(z=>z?{...z,status:"isCompleted"}:void 0)}).catch(()=>{u.error("Kegiatan gagal diupdate")}).finally(()=>{h(!1)})};return a.jsxs(a.Fragment,{children:[a.jsx(Y,{pt:"1",pb:"6",children:a.jsxs(H,{w:"full",align:"stretch",children:[e?a.jsxs(a.Fragment,{children:[a.jsxs(n,{children:[a.jsx(la,{size:"md",fontSize:"md",py:"1",value:e.status}),a.jsx(da,{size:"md",fontSize:"md",py:"1",value:e.type})]}),a.jsx(w,{size:"lg",children:e.name}),a.jsx(i,{children:e.description})]}):a.jsxs(a.Fragment,{children:[a.jsxs(n,{children:[a.jsx(o,{rounded:"md",h:"6",w:"80px"}),a.jsx(o,{rounded:"md",h:"6",w:"80px"})]}),a.jsx(o,{rounded:"md",h:"9",w:"80%"}),a.jsx(o,{rounded:"md",h:"6",w:"70%"}),a.jsx(o,{rounded:"md",h:"6",w:"70%"})]}),a.jsx(D,{}),e?a.jsxs(a.Fragment,{children:[a.jsxs(n,{children:[a.jsx(l,{boxSize:"6",as:ga}),a.jsxs(i,{children:[m(e.startDate),e.startDate!==e.endDate&&" - "+(m(e.endDate)||"Selesai")]})]}),a.jsxs(n,{children:[a.jsx(l,{boxSize:"6",as:xa}),a.jsx(i,{fontStyle:e.location?"inherit":"italic",children:e.location||"Tempat tidak ditentukan"})]}),e.duration>0&&a.jsxs(n,{children:[a.jsx(l,{boxSize:"6",as:A}),a.jsxs(i,{children:["Durasi ",e.duration," Hari"]})]})]}):Array(2).fill(null).map((d,g)=>a.jsx(o,{rounded:"md",h:"6",w:"60%"},g))]})}),!r&&a.jsxs(Z,{as:n,justify:"start",w:"full",children:[!!e&&a.jsxs(a.Fragment,{children:[e.status=="inProgress"&&a.jsx(f,{leftIcon:a.jsx(oa,{size:"20"}),colorScheme:"green",children:"Selesaikan Sekarang",isLoading:c,onClick:()=>I("endnow")}),e.status=="upcoming"&&a.jsx(f,{leftIcon:a.jsx(aa,{size:"20"}),colorScheme:"orange",children:"Mulai Sekarang",isLoading:c,onClick:()=>I("startnow")})]}),a.jsx(D,{}),a.jsxs(sa,{children:[a.jsx(ea,{as:ra,"aria-label":"More",icon:a.jsx(fa,{size:"20"})}),a.jsxs(na,{children:[a.jsx(C,{icon:a.jsx(ua,{size:"18"}),onClick:T,children:"Hapus"}),a.jsx(C,{icon:a.jsx(ma,{size:"18"}),children:"Sunting"})]})]})]})]})}function Pa({event:s}){var r;const t=((r=ia[s.type])==null?void 0:r.color)||"gray";return a.jsx(V,{variant:"left-accent",colorScheme:t,rounded:"sm",children:a.jsxs(n,{justify:"space-between",w:"full",children:[a.jsxs(H,{spacing:"1",align:"start",children:[a.jsx(U,{fontWeight:"600",children:s.name}),a.jsxs(n,{fontSize:"sm",children:[a.jsx(l,{as:pa,boxSize:"16px"}),a.jsxs(i,{children:[m(s.startDate),s.startDate!==s.endDate&&" - "+(m(s.endDate)||"Selesai")]})]}),s.duration>0&&a.jsxs(n,{fontSize:"sm",children:[a.jsx(l,{as:A,boxSize:"16px"}),a.jsxs(i,{children:["Durasi : ",s.duration," Hari"]})]})]}),a.jsx(ka,{eventId:s.eventLogId,children:a.jsx(f,{size:"sm",colorScheme:"blue",children:"Lihat Detail"})})]})})}export{Pa as C,ka as D,ga as I,Ba as S};
