import{L as ce,j as e,U as W,W as Y,M as d,G as N,Q as f,N as g,O as C,X as U,V as j,T as i,r as Me,a7 as xe,aa as ue,ab as ze,I as we}from"./createReactComponent-CTa0ICdI.js";import{C as We,S as Ne}from"./CardEventLog-CmGb4I0W.js";import{x as Ue,u as E,C as Ae,y as B,q as S,z as He,v as se,B as Oe,l as A,D as Fe,b as Ke,f as Le,L as Ge}from"./app-B_Z13nOW.js";import{I as he}from"./IconNotebookOff-C9COnMa-.js";import{T as k,t as Re}from"./dateFormating-b7MTPZXO.js";import{M as Ye,a as ne}from"./index-BA-WadA8.js";import{a as Ee}from"./index.tags-BMl43ewZ.js";import{T as re}from"./TagWithIcon-xFUgUEwJ.js";import{g as H,b as G,d as R}from"./common.utils-Bv_tZ8l0.js";import{I as Be}from"./IconCalendar-CEFiF34F.js";import{B as _e,d as me,M as te,S as pe,I as Ve}from"./ISPUChart-BQloTdZc.js";import{B as P}from"./icon-white-DmkG9gB2.js";import{F as O}from"./chunk-KRPLQIP4-noB-ZVK0.js";import{a as $e}from"./ReportCard-ctYelU1l.js";import{N as ie}from"./AddNodeSubscription-Dnu_XOr6.js";import{G as je,M as ge,T as fe,a as ye,b as be,c as M,U as Xe}from"./MyLineChart-Cj6TDcKW.js";import{T as _,a as z}from"./chunk-IAXSQ4X2-DpX_T3X7.js";import{T as V,a as $,b as w}from"./chunk-4YMKQ5D4-DYkDvR0m.js";import{I as qe}from"./IconDatabaseX-CVUmnl8o.js";import{G as Qe}from"./chunk-JARCRF6W-CMtdO6Jo.js";import{I as Ze}from"./IconBuilding-se2yoo6E.js";import{I as oe}from"./IconTrees-Dv1Ac1H8.js";import{I as le}from"./IconCirclePlus-1c9aJlrm.js";import"./IconMapPin-SH2eIzr7.js";import"./icon-BHz-Vl6Z.js";import"./IconTrash-B1u9iJqt.js";import"./IconEdit-BoMKMMSQ.js";import"./chunk-4FCEGNGT-BN-fAiTR.js";/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Je=ce("outline","circle-x","IconCircleX",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M10 10l4 4m0 -4l-4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var F=ce("outline","history","IconHistory",[["path",{d:"M12 8l0 4l2 2",key:"svg-0"}],["path",{d:"M3.05 11a9 9 0 1 1 .5 4m-.5 5v-5h5",key:"svg-1"}]]);function ea({data:t,...n}){return e.jsxs(W,{...n,children:[e.jsxs(Y,{pb:"0",as:d,children:[e.jsx(N,{border:"2px solid",borderColor:"orange.200",color:"orange.500",rounded:"md",p:"1",boxSize:"45px",children:e.jsx(f,{as:Ue,boxSize:"28px"})}),e.jsxs(g,{ml:"1",children:[e.jsx(C,{size:"md",children:"Kegiatan terkini"}),e.jsxs(k,{mt:"1",children:[t.length," Kegiatan Terkini"]})]})]}),e.jsx(U,{children:e.jsx(j,{align:"stretch",children:t.length?e.jsx(e.Fragment,{children:t.map(a=>e.jsx(We,{event:a},a.eventLogId))}):e.jsxs(d,{justify:"center",color:"gray.500",py:"3",children:[e.jsx(he,{stroke:"1.2",size:"40"}),e.jsx(i,{fontWeight:"500",fontSize:"lg",children:"Tidak ada Kegiatan Berlangsung"})]})})})]})}function aa({data:t}){var q,Q;const{dashboardInfo:n,nodes:a}=t,{name:s,type:r,coordinate:o,countNodes:l,companyId:c,userId:p,createdAt:x}=n,[h,u]=Me.useState(null),{roleIsNot:b,roleIs:X,user:ve}=E(),K=(I="outdoor")=>{var v,T,Z,J,ee;return[{name:"ISPU",currentData:(v=a[I])==null?void 0:v.map(m=>{var ae;const y=(ae=m.latestData)==null?void 0:ae.ispu;if(!y)return{...m,data:{name:"ISPU"}};const{datetime:D,value:L}=y;if(!L||!L[0])return{...m,data:{name:"ISPU"}};const{ispu:Pe,category:Te}=L[0];return{...m,data:{name:"ISPU",datetime:D,value:Pe,color:H(Te).colorScheme}}})},{name:"PM2.5",currentData:(T=a[I])==null?void 0:T.map(m=>{var y;return{...m,data:{name:"PM2.5",...(y=m.latestData)==null?void 0:y.pm25}}})},{name:"PM10",currentData:(Z=a[I])==null?void 0:Z.map(m=>{var y;return{...m,data:{name:"PM10",...(y=m.latestData)==null?void 0:y.pm100}}})},{name:"CH4",currentData:(J=a[I])==null?void 0:J.map(m=>{if(!m.latestData)return{...m,data:{name:"CH4"}};const{datetime:y,value:D}=m.latestData.ch4;return{...m,data:{name:"CH4",datetime:y,value:D.value,color:""}}})},{name:"CO2",currentData:(ee=a[I])==null?void 0:ee.map(m=>{if(!m.latestData)return{...m,data:{name:"CO2"}};const{datetime:y,value:D}=m.latestData.co2;return{...m,data:{name:"CO2",datetime:y,value:D.value,color:""}}})}]},Ce={name:s,type:r,coordinate:o,companyId:c,indoorNodeValue:h!==null?K("indoor")[h].currentData:null},ke=h!==null?K()[h].currentData:a.outdoor,De=s||"Dasbor "+(X(["admin","gov"])?(Q=(q=ve.view)==null?void 0:q.user)==null?void 0:Q.name:"Anda");return e.jsx(W,{size:"sm",w:"full",children:e.jsxs(U,{as:O,flexDir:{base:"column",lg:"row"},gap:{base:"2",lg:"5"},children:[e.jsx(Ye,{minH:"275px",h:"275px",flex:"3 1 0",companiesData:c?[Ce]:[],marker:h===null?ne.DetailNodesMarker:ne.ValueMarker,data:ke||[]}),e.jsxs(j,{align:"start",p:"1",flex:"2 1 0",children:[e.jsxs(d,{mt:"6",children:[e.jsx(Ae,{type:r}),e.jsx(C,{size:"md",fontWeight:"600",children:De})]}),e.jsxs(d,{flexWrap:"wrap",mt:"2",children:[!!x&&e.jsx(e.Fragment,{children:e.jsx(re,{icon:Be,colorScheme:"blue",children:`Dibuat pada ${Re(x)}`})}),r!=="regular"&&e.jsx(Ee,{value:r}),e.jsx(re,{icon:B,children:l+" Node"})]}),e.jsx(S,{}),l>0?e.jsxs(g,{children:[e.jsx(i,{children:"Tampilkan nilai dari parameter : "}),e.jsx(_e,{colorScheme:"teal",isAttached:!0,size:"sm",variant:"outline",flexWrap:"wrap",mt:"1",rowGap:"2",children:K().map((I,v)=>e.jsx(P,{border:"1px solid",borderColor:"teal.400",sx:h==v?{bg:"teal.500",color:"white",_hover:{bg:"teal.600"}}:{},onClick:()=>u(T=>T!=v?v:null),children:I.name},v))})]}):e.jsx(xe,{fontSize:"md",status:"warning",rounded:"md",children:e.jsxs(i,{children:["Tidak ada node yang dapat dianalisis.",e.jsx("br",{}),"Tambahkan node untuk memulai memantau kualitas udara"]})}),e.jsxs(d,{justify:"end",flexWrap:"wrap-reverse",w:"full",mt:"4",children:[b("regular")&&e.jsx(He,{colorScheme:"blue",selectCompanyOnly:b(["admin","gov"]),children:"Ganti Dashboard"}),X(["admin","gov"])&&r=="regular"&&e.jsx(se,{to:`/users/${p}`,children:e.jsx(P,{colorScheme:"blue",ml:"2",children:"Detail Pengguna"})}),!!c&&e.jsx(se,{to:`/companies/${c}`,children:e.jsx(P,{colorScheme:"blue",ml:"2",children:"Detail Perusahaan"})})]})]})]})})}function sa({data:t,...n}){return e.jsxs(W,{...n,children:[e.jsxs(Y,{pb:"0",as:d,children:[e.jsx(N,{border:"2px solid",borderColor:"yellow.200",color:"yellow.500",rounded:"md",p:"1",boxSize:"45px",children:e.jsx(f,{as:Oe,boxSize:"28px"})}),e.jsxs(g,{ml:"1",children:[e.jsx(C,{size:"md",children:"Aduan terkini"}),e.jsxs(k,{mt:"1",children:[t.length," Aduan terkini"]})]})]}),e.jsxs(U,{children:[e.jsx(i,{mb:"4",children:"Aduan dalam radius 250 meter dari lokasi perusahaan Anda dalam 24 jam terakhir"}),e.jsx(j,{align:"stretch",children:t.length?t.map(a=>e.jsx($e,{border:"1px solid",rounded:"lg",borderColor:"gray.200",size:"sm",data:a},a.reportId)):e.jsxs(d,{justify:"center",color:"gray.500",py:"3",children:[e.jsx(he,{stroke:"1.2",size:"40"}),e.jsx(i,{fontWeight:"500",fontSize:"lg",children:"Tidak ada Aduan di sekitar"})]})})]})]})}const na="/assets/opss-BHGvqmEc.png";function ra({CH4data:t,CO2data:n}){const a=[{symbol:"CO2",name:"Karbondioksida",max:ge,threshold:fe,data:n},{symbol:"CH4",name:"Metana",threshold:ye,max:be,data:t}];return e.jsxs(e.Fragment,{children:[e.jsx(d,{w:"full",justify:"space-evenly",px:"2",py:"3",border:"1px solid",borderColor:"gray.300",rounded:"5",children:a.map(({symbol:s,name:r,threshold:o,data:l,max:c},p)=>{const{value:x,category:h}=l.average.data.value,{colorScheme:u}=s=="CO2"?G(h):R(h);return e.jsxs(j,{spacing:"1",h:"86px",children:[e.jsxs(d,{color:"gray.600",alignSelf:"start",fontSize:"lg",spacing:"1",children:[e.jsxs(i,{fontWeight:"600",children:[s.slice(0,2),e.jsx("sub",{children:s[2]})]}),e.jsx(i,{fontWeight:"600",children:r})]}),e.jsxs(d,{children:[e.jsxs(g,{children:[e.jsx(i,{fontSize:"xl",fontWeight:"600",children:x+" PPM"}),e.jsx(k,{w:"full",fontSize:"md",justifyContent:"center",colorScheme:u,children:h})]}),e.jsx(me,{style:{width:"125px"},arcsLength:o,colors:je,percent:x>=c?1:x/c,arcPadding:.02,hideText:!0})]})]},p)})}),e.jsx(d,{w:"full",children:a.map(({symbol:s,data:r},o)=>e.jsx(j,{flex:"1 1 0px",border:"1px solid",borderColor:"gray.300",rounded:"5",py:"2",px:"4",children:[r.highest,r.lowest].map(({name:l,data:{value:c}},p)=>e.jsxs(d,{spacing:"1",w:"full",justify:"space-between",children:[e.jsxs(g,{children:[e.jsxs(d,{color:"gray.700",spacing:"1",fontWeight:"600",children:[e.jsxs(i,{children:[s.slice(0,2),e.jsx("sub",{children:s[2]})]}),e.jsx(i,{children:p?"Terendah":"Tertinggi"})]}),e.jsx(d,{color:"gray.600",mt:"1",children:e.jsx(i,{fontSize:"sm",children:l})})]}),e.jsxs(j,{spacing:"0",children:[e.jsx(i,{fontSize:"lg",fontWeight:"600",children:c.value+" PPM"}),e.jsx(k,{fontSize:"md",w:"full",justifyContent:"center",colorScheme:(s=="CO2"?G(c.category):R(c.category)).colorScheme,children:c.category})]})]},p))},o))}),e.jsx(S,{}),e.jsxs(d,{justify:"end",w:"full",children:[e.jsx(f,{as:F,boxSize:"18px"}),e.jsxs(i,{children:["Data diperbarui pada"," ",A(t.average.data.datetime).format("HH:mm DD MMM YYYY")]})]})]})}function ta({CO2data:t,CH4data:n}){const a=[{symbol:"CH4",name:"Metana",threshold:ye,max:be,data:n},{symbol:"CO2",name:"Karbondioksida",max:ge,threshold:fe,data:t}];return e.jsxs(e.Fragment,{children:[e.jsx(d,{w:"full",justify:"space-evenly",px:"2",h:"calc(168px + 1em)",border:"1px solid",borderColor:"gray.300",rounded:"5",children:a.map(({symbol:s,name:r,threshold:o,data:l,max:c},p)=>{const{value:x,category:h}=l.latestData.value,{colorScheme:u}=s=="CO2"?G(h):R(h);return e.jsxs(j,{spacing:"1",children:[e.jsxs(d,{color:"gray.600",fontSize:"lg",children:[e.jsxs(i,{fontWeight:"700",children:[s.slice(0,2),e.jsx("sub",{children:s[2]})]}),e.jsx(i,{fontWeight:"500",children:r})]}),e.jsx(me,{style:{width:"125px"},arcsLength:o,colors:je,percent:x>c?1:x/c,arcPadding:.02,hideText:!0}),e.jsx(i,{fontSize:"2xl",fontWeight:"600",children:x+" PPM"}),e.jsx(k,{w:"full",fontSize:"md",py:"1",justifyContent:"center",colorScheme:u,children:h})]},p)})}),e.jsxs(V,{w:"full",children:[e.jsx(_,{children:e.jsx(z,{_active:{bg:"initial"},children:"Tren Gas Emisi Rumah Kaca"})}),e.jsx($,{children:e.jsxs(w,{children:[e.jsxs(g,{h:"110px",w:"full",children:[e.jsx(i,{fontWeight:"600",mb:"2",children:"Tren Gas Metana (CH4)"}),e.jsx(M,{simple:!0,data:n.tren,gasType:"CH4",dataKeyTypeAndFunc:{func:s=>s.value}})]}),e.jsxs(g,{mt:"8",h:"110px",w:"full",children:[e.jsx(i,{fontWeight:"600",mb:"2",children:"Tren Karbondioksida (CO2)"}),e.jsx(M,{simple:!0,gasType:"CO2",data:t.tren,dataKeyTypeAndFunc:{func:s=>s.value}})]})]})})]}),e.jsx(S,{}),e.jsxs(d,{justify:"end",w:"full",children:[e.jsx(f,{as:F,boxSize:"18px"}),e.jsxs(i,{children:["Data diperbarui pada"," ",A(n.latestData.datetime).format("HH:mm DD MMM YYYY")]})]})]})}function ia({data:t}){const{latestData:{datetime:n,value:a},tren:s}=t;return e.jsxs(e.Fragment,{children:[a?e.jsxs(e.Fragment,{children:[e.jsx(Se,{value:a[0]}),e.jsx(d,{justify:"space-evenly",w:"full",children:a.map((r,o)=>e.jsx(oa,{value:r},o))})]}):e.jsx(Ie,{}),e.jsxs(V,{w:"full",children:[e.jsxs(_,{children:[e.jsx(z,{children:"Tren ISPU"}),e.jsx(z,{children:"Tren Pencemar"})]}),e.jsxs($,{children:[e.jsxs(w,{px:"0",children:[e.jsxs(g,{h:"110px",children:[e.jsx(i,{fontWeight:"600",mb:"2",children:"Tren ISPU PM2.5"}),e.jsx(te,{data:s,simple:!0,tooltipLabel:"ISPU PM2.5",dataKeyTypeAndFunc:{func:r=>(r.value||[]).find(o=>o.pollutant=="PM25")}})]}),e.jsxs(g,{mt:"8",h:"110px",children:[e.jsx(i,{fontWeight:"600",mb:"2",children:"Tren ISPU PM10"}),e.jsx(te,{data:s,tooltipLabel:"ISPU PM10",simple:!0,dataKeyTypeAndFunc:{func:r=>(r.value||[]).find(o=>o.pollutant=="PM100")}})]})]}),e.jsxs(w,{px:"0",children:[e.jsxs(g,{h:"110px",children:[e.jsx(i,{fontWeight:"600",mb:"2",children:"Tren Pencemar PM2.5"}),e.jsx(M,{simple:!0,gasType:"PM2.5",data:s,dataKeyTypeAndFunc:{func:r=>(r.value||[]).find(o=>o.pollutant=="PM25")}})]}),e.jsxs(g,{mt:"8",h:"110px",children:[e.jsx(i,{fontWeight:"600",mb:"2",children:"Tren Pencemar PM10"}),e.jsx(M,{simple:!0,gasType:"PM10",data:s,dataKeyTypeAndFunc:{func:r=>(r.value||[]).find(o=>o.pollutant=="PM100")}})]})]})]})]}),e.jsx(S,{}),!!a&&e.jsxs(d,{justify:"end",w:"full",children:[e.jsx(f,{as:F,boxSize:"18px"}),e.jsxs(i,{children:["ISPU Pukul ",A(n).format("HH:mm DD MMM YYYY")]})]})]})}function oa({value:t,...n}){const{category:a,ispu:s,pollutant:r,pollutantValue:o}=t,{colorScheme:l}=H(a);return e.jsxs(d,{as:O,bg:l+".100",py:"6px",h:"59px",px:"4",rounded:"md",spacing:"4",divider:e.jsx(pe,{borderColor:l+".200"}),...n,children:[e.jsx(i,{fontSize:"xl",fontWeight:"600",children:r}),e.jsxs(g,{children:[e.jsx(i,{fontSize:"2xl",fontWeight:"600",children:s<=300?s:"300+"}),e.jsxs(i,{fontSize:"sm",children:[o.toFixed(2)," ",Xe]})]})]})}function Se({value:t,...n}){const{category:a,ispu:s,pollutant:r}=t,{colorScheme:o,icon:l}=H(a);return e.jsxs(d,{w:"full",spacing:"4",p:"2",bg:o+".100",rounded:"5",...n,children:[e.jsxs(j,{rounded:"3",align:"start",boxSize:"95px",p:"2",spacing:"0",bg:o+".200",children:[e.jsx(i,{fontStyle:"italic",children:"ISPU"}),e.jsx(S,{}),e.jsx(i,{textAlign:"center",w:"full",fontSize:"4xl",fontWeight:"700",children:s<=300?s:"300+"})]}),e.jsxs(j,{align:"start",spacing:"2",children:[e.jsx(C,{as:"p",size:"lg",children:a}),e.jsxs(k,{colorScheme:o,variant:"outline",children:["Polutan Utama : ",r]})]}),e.jsx(S,{}),e.jsx(f,{boxSize:"90px",strokeWidth:"1.5px",color:o+".400",as:l})]})}function Ie(){return e.jsxs(d,{flexGrow:"1",w:"full",spacing:"4",px:"2",py:"8",rounded:"5",color:"gray.500",children:[e.jsx(f,{boxSize:"60px",strokeWidth:"1.5px",as:qe}),e.jsxs(g,{children:[e.jsx(i,{fontWeight:"600",fontSize:"xl",color:"gray.600",children:"ISPU Terkini tidak dapat dikalkulasi"}),e.jsxs(i,{children:["Data tidak mencukupi, tunggu sensor mengirimkan data tambahan."," "]})]})]})}function la({data:t}){var x,h;const{highest:n,lowest:a,average:s}=t,r=(x=n.data.value)==null?void 0:x[0],o=(h=a.data.value)==null?void 0:h[0],{value:l,datetime:c}=s.data;if(!l||!r||!o)return e.jsx(Ie,{});const p=[{nodeName:n.name,ispuData:r},{nodeName:a.name,ispuData:o}];return e.jsxs(e.Fragment,{children:[e.jsx(Se,{value:l[0]}),e.jsx(ue,{direction:"row",spacing:"4",w:"full",justifyContent:"space-evenly",children:p.map((u,b)=>e.jsx(da,{data:u,label:b?"Terendah":"Tertinggi"},b))}),e.jsx(S,{}),e.jsxs(d,{justify:"end",w:"full",children:[e.jsx(f,{as:F,boxSize:"18px"}),e.jsxs(i,{children:["ISPU Pukul ",A(c).format("HH:mm DD MMM YYYY")]})]})]})}function da({data:t,label:n}){const{category:a,ispu:s}=t.ispuData,{colorScheme:r}=H(a);return e.jsxs(j,{minW:"200px",spacing:"0",rounded:"md",align:"start",px:"4",py:"3",justify:"center",bg:r+".100",children:[e.jsx(i,{fontWeight:"500",children:n}),e.jsxs(d,{w:"full",justify:"space-between",children:[e.jsx(i,{fontSize:"2xl",fontWeight:700,children:s<=300?s:"300+"}),e.jsx(k,{bg:r+".300",children:a})]}),e.jsxs(d,{spacing:"1",children:[e.jsx(B,{size:"16"}),e.jsx(i,{w:"full",noOfLines:1,fontSize:"sm",children:t.nodeName})]})]})}function ca({data:t,type:n,isSingleNode:a}){var c,p,x,h;const s=a?(p=(c=t.ispu)==null?void 0:c.latestData.value)==null?void 0:p[0].recomendation:(h=(x=t.ispu)==null?void 0:x.average.data.value)==null?void 0:h[0].recomendation,r=a?t.ch4.latestData.value.recomendation:t.ch4.average.data.value.recomendation,o=a?t.co2.latestData.value.recomendation:t.co2.average.data.value.recomendation,l=[{label:"Kualitas Udara",recomendation:s},{label:"Emisi Karbondioksida",recomendation:o},{label:"Emisi Metana",recomendation:r}].filter(u=>u.recomendation);return e.jsxs(xe,{mt:"6",status:"info",variant:"left-accent",rounded:"sm",bg:"blue.50",alignItems:"start",children:[e.jsx(f,{as:Ve,boxSize:"7",color:"blue.600",mt:"1"}),e.jsxs(V,{ml:"3",variant:"soft-rounded",colorScheme:"blue",children:[e.jsxs(_,{as:d,children:[e.jsx(ze,{fontWeight:"600",children:"Rekomendasi"}),e.jsx(S,{}),l.map((u,b)=>e.jsx(z,{rounded:"lg",py:"1",children:u.label},b))]}),e.jsx($,{pb:"2",children:l.map(({recomendation:u},b)=>e.jsx(w,{px:"0",py:"2",as:j,align:"start",children:e.jsxs(Qe,{gap:"6",templateColumns:"repeat(auto-fit, minmax(300px, 1fr))",children:[e.jsx(i,{textIndent:"2em",fontSize:"md",textAlign:"justify",children:u==null?void 0:u.info}),e.jsxs(i,{fontSize:"md",textAlign:"justify",children:[e.jsxs(i,{fontWeight:"600",as:"span",children:["Saran :"," "]}),n=="indoor"?u==null?void 0:u.company:u==null?void 0:u.public]})]})},b))})]})]})}const xa={indoor:{icon:Ze,color:"blue",title:"Kualitas udara di perusahaan"},outdoor:{icon:oe,color:"green",title:"Kualitas udara di sekitar perusahaan"},arround:{icon:oe,color:"green",title:"Kualitas udara di sekitar"}};function de({data:t,type:n}){const{data:a,countNodes:s,analiysisDataType:r}=t,o=r=="single",l=s.all-s.active,{icon:c,color:p,title:x}=xa[n];return e.jsxs(W,{children:[e.jsx(Y,{pb:"1",children:e.jsxs(d,{children:[e.jsx(N,{border:"2px solid",borderColor:p+".200",color:p+".500",rounded:"md",p:"1",boxSize:"45px",children:e.jsx(f,{as:c,boxSize:"28px"})}),e.jsxs(g,{children:[e.jsx(C,{size:"md",children:x}),!!a&&e.jsxs(d,{spacing:"4",children:[e.jsxs(d,{children:[e.jsx(f,{as:B}),e.jsx(i,{children:o?a.node.name:`Rerata dari ${s.active} node`})]}),!!l&&e.jsxs(d,{children:[e.jsx(f,{as:Je}),e.jsxs(i,{children:[l," Node Tidak Aktif"]})]})]})]})]})}),e.jsx(U,{children:s.active&&a?e.jsxs(e.Fragment,{children:[e.jsxs(ue,{divider:e.jsx(pe,{borderColor:"gray.200"}),direction:"row",spacing:"5",children:[e.jsx(j,{flex:"1 1 0px",align:"start",spacing:"4",children:o?e.jsx(ia,{data:a.ispu}):e.jsx(la,{data:a.ispu})}),e.jsx(j,{flex:"1 1 0px",align:"start",spacing:"4",children:o?e.jsx(ta,{CO2data:a.co2,CH4data:a.ch4}):e.jsx(ra,{CH4data:a.ch4,CO2data:a.co2})})]}),e.jsx(ca,{type:n,isSingleNode:o,data:a})]}):e.jsx(ua,{data:t,type:n})})]})}function ua({data:t,type:n}){var c,p,x;const{all:a,active:s}=t.countNodes,{user:r,roleIs:o}=E(),l=a-s;return e.jsxs(O,{align:"center",flexWrap:"wrap",justify:"center",px:"3",py:"6",children:[e.jsx(we,{src:na,h:"140px"}),e.jsx(j,{align:"start",spacing:"1",children:a?e.jsxs(e.Fragment,{children:[e.jsx(C,{size:"md",children:"Tidak dapat menampilkan data"}),e.jsx(i,{color:"gray.500",fontStyle:"italic",children:"Tidak ada node yang aktif"}),e.jsxs(d,{mt:"3",spacing:"4",children:[e.jsx(N,{boxSize:"40px",border:"2px solid",borderColor:"orange.300",p:"2",rounded:"md",children:e.jsx(f,{as:Fe,color:"orange.500",boxSize:"full"})}),e.jsx(i,{fontWeight:"600",fontSize:"lg",children:`Data pada ${l} node tidak mutakhir `})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(C,{size:"md",mb:"2",children:["Belum Menambahkan Node ",n=="arround"?"":n]}),!o("gov")&&e.jsx(e.Fragment,{children:n=="arround"?e.jsx(ie,{subsInfo:{type:"user",userId:((p=(c=r.view)==null?void 0:c.user)==null?void 0:p.userId)||r.userId},children:e.jsx(P,{colorScheme:"blue",leftIcon:e.jsx(le,{size:"18"}),children:"Tambahkan Node"})}):e.jsx(ie,{subsInfo:{type:"company",companyData:(x=r.view)==null?void 0:x.company},children:e.jsx(P,{colorScheme:"blue",leftIcon:e.jsx(le,{size:"18"}),children:"Tambahkan Node"})})})]})})]})}function Ra(){const{user:t,roleIs:n,roleIsNot:a}=E(),{id:s,type:r}=ha(t);if(!r&&n(["admin","gov"]))return e.jsx(Ne,{selectCompanyOnly:!1});const o=s&&r?`${r==="company"?"/companies/":"/users/"}${s}/dashboard`:null,{data:l,isLoading:c}=Ke(o,Le);return c||!l?e.jsx(Ge,{}):e.jsxs(j,{spacing:"4",align:"stretch",children:[e.jsx(aa,{data:l}),l.indoor&&e.jsx(de,{data:l.indoor,type:"indoor"}),e.jsx(de,{data:l.outdoor,type:l.dashboardInfo.type=="regular"?"arround":"outdoor"}),a("regular")&&e.jsxs(O,{flexDir:{base:"column",lg:"row"},w:"full",gap:"4",children:[e.jsx(ea,{flex:"1 1 0 ",data:l.currentEventLogs}),e.jsx(sa,{flex:"1 1 0 ",data:l.nearReports})]})]})}function ha(t){const{view:n}=t;return n!=null&&n.company&&n.company.companyId?{type:"company",id:n.company.companyId}:n!=null&&n.user&&n.user.userId&&n.user.role=="regular"?{type:"user",id:n.user.userId}:{type:void 0,id:void 0}}export{Ra as default};
