import{N as D,j as e,a0 as m,U as u,H as y,Y as l,V as v,S as k,X as C,ab as V,I as j,r as b,T as O,W as J,Z as oe}from"./font-5Mxaz-3e.js";import{I as ce,C as de,S as xe}from"./CardEventLog-DwnJ6tz6.js";import{F as S,T as I,ad as he,u as U,ae as pe,y as ue,a5 as ge,q as X,l as f,d as me,af as je,ag as fe,N as ye,a as q,G as Z,I as be,n as ve,ah as Se,ai as ke,b as Ce,f as we,aj as Me,L as ze}from"./app-DYChiyhM.js";import{g as Ie,b as De,d as Te,r as w}from"./common.utils-28SvxYlP.js";import{U as Ae,a as Re,b as Pe,T as We,M as Le,G as Fe,c as Ye}from"./MyLineChart-BXIv1Ay6.js";import{d as Oe,I as Ue,B as Q,M as Ke,S as Ge}from"./ISPUChart-BUd_TdwO.js";import{T as Ee,F as He,e as Be,i as _e,l as $e,r as Ne}from"./EventCalendar-BzwLwHQ9.js";import{G as A}from"./chunk-JARCRF6W-CSqiEFzw.js";import{I as Ve}from"./IconChevronUp-DEmA49gV.js";import{I as L,B as R,c as Je}from"./logo-white-CsuGh6aO.js";import{C as Xe}from"./chunk-RKXMPHPI-DJ8R969N.js";import{D as K}from"./logo-Byq_-Epn.js";import{I as qe}from"./IconTrees-CKlpvsSX.js";import{T as ee,a as ae,b as ne}from"./chunk-4YMKQ5D4-DA2V1YAZ.js";import{T as te,a as se}from"./chunk-IAXSQ4X2-D5Bt3YnL.js";import{M as Ze,a as Qe}from"./index-BbXyb5rb.js";import{R as B}from"./ReportCard-CdcfWHD-.js";import{S as ea}from"./chunk-VTV6N5LE-B0POHVpf.js";import"./dateFormating-uitVsAGu.js";import"./IconMapPin-DDszNiav.js";import"./IconTrash-CjGmnbs0.js";import"./IconEdit-KqgxMpic.js";import"./chunk-4FCEGNGT-BMu37YYo.js";import"./IconCalendar-B1mhmU7N.js";import"./TagWithIcon-D2AD1She.js";/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var aa=D("outline","air-balloon","IconAirBalloon",[["path",{d:"M10 19m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v1a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M12 16c3.314 0 6 -4.686 6 -8a6 6 0 1 0 -12 0c0 3.314 2.686 8 6 8z",key:"svg-1"}],["path",{d:"M12 9m-2 0a2 7 0 1 0 4 0a2 7 0 1 0 -4 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var na=D("outline","air-conditioning","IconAirConditioning",[["path",{d:"M8 16a3 3 0 0 1 -3 3",key:"svg-0"}],["path",{d:"M16 16a3 3 0 0 0 3 3",key:"svg-1"}],["path",{d:"M12 16v4",key:"svg-2"}],["path",{d:"M3 5m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v4a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-3"}],["path",{d:"M7 13v-3a1 1 0 0 1 1 -1h8a1 1 0 0 1 1 1v3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ta=D("outline","clipboard-off","IconClipboardOff",[["path",{d:"M5.575 5.597a2 2 0 0 0 -.575 1.403v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2m0 -4v-8a2 2 0 0 0 -2 -2h-2",key:"svg-0"}],["path",{d:"M9 5a2 2 0 0 1 2 -2h2a2 2 0 1 1 0 4h-2",key:"svg-1"}],["path",{d:"M3 3l18 18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sa=D("outline","database-off","IconDatabaseOff",[["path",{d:"M12.983 8.978c3.955 -.182 7.017 -1.446 7.017 -2.978c0 -1.657 -3.582 -3 -8 -3c-1.661 0 -3.204 .19 -4.483 .515m-2.783 1.228c-.471 .382 -.734 .808 -.734 1.257c0 1.22 1.944 2.271 4.734 2.74",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c.986 0 1.93 -.067 2.802 -.19m3.187 -.82c1.251 -.53 2.011 -1.228 2.011 -1.99v-6",key:"svg-1"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c3.217 0 5.991 -.712 7.261 -1.74m.739 -3.26v-4",key:"svg-2"}],["path",{d:"M3 3l18 18",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ia=D("outline","star","IconStar",[["path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z",key:"svg-0"}]]);function ra({indoor:a,outdoor:n}){var r,o;const t=[{key:"indoor",label:"Di dalam",data:(r=a==null?void 0:a.ispu)==null?void 0:r[0]},{key:"outdoor",label:"Di luar",data:(o=n==null?void 0:n.ispu)==null?void 0:o[0]}],i=[{label:"Rerata Partikulat (PM) 2.5",data:[{key:"indoor",label:"Di dalam",data:a==null?void 0:a.pm25},{key:"outdoor",label:"Di luar",data:n==null?void 0:n.pm25}]},{label:"Rerata Partikulat (PM) 10",data:[{key:"indoor",label:"Di dalam",data:a==null?void 0:a.pm100},{key:"outdoor",label:"Di luar",data:n==null?void 0:n.pm100}]}];return e.jsx(e.Fragment,{children:e.jsxs(S,{flexWrap:"wrap",align:"stretch",gap:"4",children:[e.jsx(Y,{flexGrow:"1",title:"Rerata Indeks Standar Pencemar Udara (ISPU)",children:t.map(({label:c,data:x},g)=>e.jsxs(m,{flex:"1 1 0",children:[e.jsx(I,{variant:"outline",colorScheme:g?"green":"blue",mb:"2",children:c}),x?e.jsxs(u,{spacing:"3",children:[e.jsx(y,{rounded:"md",p:"2",bg:Ie(x==null?void 0:x.category).colorScheme+".300",minW:"40px",children:e.jsx(l,{fontSize:"xl",fontWeight:"600",children:x.ispu<=300?x.ispu:"300+"})}),e.jsxs(m,{children:[e.jsx(l,{fontWeight:"600",fontSize:"2xl",mt:"-1",children:x.category}),e.jsxs(l,{fontSize:"sm",color:"gray.600",children:["Polutan Utama : ",x.pollutant]})]})]}):e.jsx(F,{})]},g))}),e.jsx(S,{flexGrow:"1",flexWrap:"wrap",align:"stretch",gap:"4",children:i.map(({label:c,data:x},g)=>e.jsx(Y,{title:c,children:x.map(({label:h,data:s},p)=>e.jsxs(m,{flex:"1 1 0",children:[e.jsx(I,{mb:"2",variant:"outline",colorScheme:p?"green":"blue",children:h}),s?e.jsxs(y,{alignContent:"baseline",rounded:"md",p:"2",bg:"gray.100",children:[e.jsx(l,{fontSize:"xl",fontWeight:"600",children:s.toFixed(2)}),e.jsx(l,{ml:"1",fontSize:"sm",children:Ae})]}):e.jsx(F,{})]},p))},g))})]})})}function la({indoor:a,outdoor:n}){const t=[{key:"ch4",label:"Emisi Gas Metana Rata-Rata",data:[{key:"indoor",label:"Di dalam",data:a==null?void 0:a.ch4},{key:"outdoor",label:"Di luar",data:n==null?void 0:n.ch4}],threshold:Re,max:Pe,unit:"PPM"},{key:"co2",label:"Emisi Gas Karbonioksida Rata-Rata",data:[{key:"indoor",label:"Di dalam",data:a==null?void 0:a.co2},{key:"outdoor",label:"Di luar",data:n==null?void 0:n.co2}],threshold:We,max:Le,unit:"PPM"}];return e.jsx(S,{align:"stretch",flexDir:{base:"column",lg:"row"},gap:"4",children:t.map(({label:i,data:r,unit:o,threshold:c,max:x,key:g})=>e.jsx(Y,{title:i,children:r.map(({label:h,data:s},p)=>{const{colorScheme:d}=g=="co2"?De(s==null?void 0:s.category):Te(s==null?void 0:s.category);return e.jsxs(m,{flex:"1 1 0",children:[e.jsx(I,{variant:"outline",colorScheme:p?"green":"blue",mb:"2",children:h}),s?e.jsxs(u,{justify:"center",wrap:"wrap-reverse",children:[e.jsxs(v,{spacing:"1",align:"stretch",children:[e.jsxs(y,{alignContent:"baseline",rounded:"md",p:"2",bg:d+".200",children:[e.jsx(l,{fontSize:"xl",fontWeight:"700",children:s.value.toFixed(2)}),e.jsx(l,{ml:"1",fontSize:"sm",children:o})]}),e.jsx(I,{w:"full",fontSize:"md",justifyContent:"center",colorScheme:d,children:s.category})]}),e.jsx(Oe,{style:{width:"120px"},arcsLength:c,colors:Fe,percent:s.value>=x?1:s.value/x,arcPadding:.02,hideText:!0})]}):e.jsx(F,{})]},p)})},g))})}function F(){return e.jsxs(u,{py:"8px",justify:"center",align:"center",color:"gray.400",spacing:"1",children:[e.jsx(l,{fontWeight:"600",w:"max-content",size:"sm",textAlign:"center",children:"Data tidak lengkap"}),e.jsx(Ee,{label:"Rerata parameter udara tidak dapat dihitung karena data yang ada tidak mencukupi",children:e.jsx(L,{"aria-label":"info",size:"xs",variant:"transparant",icon:e.jsx(he,{size:"18"})})})]})}function oa({data:a,periode:n,dateRange:t}){const{screenType:i}=U(),{eventLogs:r,count:{countStatus:o,countType:c,all:x},eventIdLongestEvent:g}=a,h=c.find(s=>s.type=="production");return e.jsx(k,{size:w,shadow:"xs",children:e.jsx(C,{children:x?e.jsxs(S,{direction:i=="desktop"?"row-reverse":"column",gap:"4",children:[e.jsxs(v,{flex:"1 0 0",align:"stretch",children:[e.jsxs(V,{variant:"top-accent",bg:"blue.100",p:"3",roundedTop:"sm",roundedBottom:"md",fontSize:"md",justifyContent:"space-between",flexWrap:"wrap",gap:"6",children:[e.jsxs(u,{align:"end",children:[e.jsx(y,{p:"2",rounded:"md",bg:"blue.200",boxSize:"50px",fontSize:"3xl",fontWeight:"600",children:x}),e.jsxs(m,{children:[e.jsx(l,{children:"Total"}),e.jsx(l,{fontWeight:"600",children:"Aktivitas di bulan ini"})]})]}),e.jsx(v,{align:"start",children:o.map((s,p)=>{const{icon:d,name:M}=pe[s.status];return e.jsxs(u,{children:[e.jsx(y,{bg:"blue.200",p:"1",rounded:"md",children:e.jsx(j,{as:d,boxSize:"20px"})}),e.jsxs(l,{children:[s.count||"Tidak ada"," aktivitas"," ",M.toLowerCase()]})]},p)})})]}),e.jsx(l,{fontWeight:"600",children:"Kegiatan Produksi"}),e.jsxs(u,{px:"3",justify:"space-evenly",wrap:"wrap",children:[e.jsx(u,{children:e.jsxs(y,{p:"3",rounded:"md",bg:"green.100",h:"50px",gap:"2",children:[e.jsx(y,{bg:"green.200",p:"2",rounded:"md",children:e.jsx(j,{as:ue,boxSize:"20px"})}),e.jsx(l,{fontSize:"3xl",fontWeight:"600",children:(h==null?void 0:h.count)||0}),e.jsx(l,{fontWeight:"600",children:"Aktivitas produksi"})]})}),e.jsx(u,{children:e.jsxs(y,{p:"3",rounded:"md",bg:"green.100",h:"50px",gap:"2",children:[e.jsx(y,{bg:"green.200",p:"2",rounded:"md",children:e.jsx(j,{as:ce,boxSize:"20px"})}),e.jsx(l,{fontSize:"3xl",fontWeight:"600",children:(h==null?void 0:h.days)||0}),e.jsx(l,{fontWeight:"600",children:"Hari produksi"})]})})]}),c.filter(s=>s.count&&s.type!=="production").length>0&&e.jsxs(e.Fragment,{children:[e.jsx(l,{fontWeight:"600",children:"Jumlah Aktivitas berdasarkan jenis aktivitas"}),e.jsx(A,{justifyContent:"center",templateColumns:"repeat(auto-fit, minmax(160px, 120px))",gap:"2",children:c.filter(s=>s.count&&s.type!=="production").map(s=>{const{color:p,icon:d,name:M}=ge[s.type];return e.jsxs(m,{p:"2",bg:p+".100",rounded:"md",children:[e.jsxs(u,{justify:"center",spacing:"1",children:[e.jsx(l,{fontSize:"2xl",fontWeight:"600",children:s.count}),e.jsx(j,{as:d,color:p+".500",boxSize:"23px"})]}),e.jsxs(l,{textAlign:"center",children:[s.days," Hari ",M.toLowerCase()]})]},s.type)})})]}),e.jsx(X,{}),!!g&&e.jsxs(e.Fragment,{children:[e.jsx(l,{fontWeight:"600",children:"Aktivitas terlama"}),e.jsx(de,{event:r.find(s=>s.eventLogId==g)})]})]}),i!=="desktop"&&e.jsx(l,{fontWeight:"600",children:"Kegiatan Dalam Kalender"}),e.jsx(m,{rounded:"lg",flex:"1 0 0",h:"auto",minH:"400px",overflow:"hidden",children:e.jsx(ca,{periode:n,data:a,dateRange:t})})]}):e.jsxs(u,{justify:"center",w:"full",py:"10",spacing:"3",color:"gray.500",children:[e.jsx(j,{as:ta,boxSize:"45px"}),e.jsx(l,{fontSize:"xl",fontWeight:"500",children:"Tidak Ada Catatan Aktivitas"})]})})})}function ca({dateRange:a,periode:n,data:t}){const[i,r]=a,o=b.useRef(),c=f(r).startOf(n).isSame(f().startOf(n));return e.jsxs(e.Fragment,{children:[e.jsx(He,{firstDay:0,ref:o,events:Be(t.eventLogs),fixedWeekCount:!1,initialDate:r,plugins:[_e],initialView:"dayGridYear",height:"100%",monthStartFormat:{month:"short",day:"numeric"},validRange:{start:a[0],end:c?f().toDate():a[1]},locale:$e,headerToolbar:!1,eventContent:x=>Ne(x,!0)}),e.jsx("style",{children:`.fc-day.fc-day-disabled {
					border : 0px;
					padding : 0px
					max-height : 0px !important;
				}
				.fc-day.fc-day-disabled *{
					display : none;
					max-height : 0px !important;
					border : 0px
				}
				`})]})}function ie(a){const{isOpen:n,onToggle:t}=me();return e.jsxs(k,{size:w,shadow:"xs",flexGrow:"1",children:[e.jsx(O,{as:R,onClick:t,variant:"ghost",py:"8",colorScheme:"white",justifyContent:"start",alignItems:"center",w:"full",size:"lg",iconSpacing:"12px",leftIcon:e.jsx(y,{bg:"orange.200",p:"1.5",rounded:"lg",children:e.jsx(j,{as:Ue,boxSize:"20px",color:"orange.600"})}),rightIcon:e.jsx(j,{boxSize:"20px",as:n?Ve:je}),children:"Rekomendasi"}),e.jsxs(Xe,{in:n,animateOpacity:!0,children:[e.jsx(K,{}),e.jsx(C,{pt:"4",children:a.children})]})]})}function da({indoor:a,outdoor:n}){var i,r;const t=[{key:"indoor",label:"Untuk lingkup perusahaan",data:(i=a==null?void 0:a.ispu)==null?void 0:i[0].recomendation},{key:"outdoor",label:"Untuk kondisi diluar perusahaan",data:(r=n==null?void 0:n.ispu)==null?void 0:r[0].recomendation}];return t.filter(o=>o.data).length?e.jsx(ie,{children:e.jsx(A,{templateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:8,children:t.filter(o=>o.data).map(({label:o,key:c,data:x})=>e.jsx(re,{type:c,label:o,recomendation:x},c))})}):null}function xa({indoor:a,outdoor:n}){const t=[{key:"co2",label:"Karbon dioksida"},{key:"ch4",label:"Metana"}].map(i=>{var r,o;return{...i,data:[{key:"indoor",label:"Untuk lingkup perusahaan",recomendation:(r=a==null?void 0:a[i.key])==null?void 0:r.recomendation},{key:"outdoor",label:"Untuk kondisi di luar perusahaan",recomendation:(o=n==null?void 0:n[i.key])==null?void 0:o.recomendation}]}}).filter(i=>i.data.filter(r=>r.recomendation).length);return t.length?e.jsx(ie,{children:e.jsxs(ee,{variant:"soft-rounded",colorScheme:"gray",children:[e.jsx(te,{as:u,children:t.map((i,r)=>e.jsx(se,{rounded:"lg",py:"1",children:i.label},r))}),e.jsx(K,{my:"3",borderColor:"gray.200"}),e.jsx(ae,{pb:"2",children:t.map(({key:i,data:r})=>e.jsx(ne,{px:"0",py:"1",as:v,align:"start",children:e.jsx(A,{templateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:6,children:r.filter(o=>o.recomendation).map(({label:o,recomendation:c,key:x})=>e.jsx(re,{type:x,label:o,recomendation:c},x))})},i))})]})}):null}function re({type:a,label:n,recomendation:t}){return e.jsxs(m,{as:v,align:"start",children:[e.jsxs(I,{colorScheme:a=="indoor"?"blue":"green",size:"lg",p:"3",alignItems:"center",children:[e.jsx(fe,{boxSize:"18px",as:a=="indoor"?ye:qe}),n]}),e.jsxs(m,{mt:"1",children:[e.jsx(l,{textAlign:"justify",children:t==null?void 0:t.info}),e.jsxs(l,{textAlign:"justify",mt:"1",children:[e.jsxs(l,{as:"span",fontWeight:600,children:["Saran :"," "]}),a=="indoor"?t==null?void 0:t.company:t==null?void 0:t.public]})]})]})}function ha({data:a,company:n}){const{screenType:t}=U(),[i,r]=b.useState(0),{average:o,countPerStar:c,count:x,reports:g}=a,h=B[Math.round(o)-1];return e.jsx(k,{size:w,shadow:"xs",children:e.jsx(C,{children:x?e.jsxs(S,{gap:"4",direction:t=="desktop"?"row":"column",children:[e.jsxs(v,{flex:"1 1 0",align:"stretch",children:[e.jsxs(V,{colorScheme:h.color.slice(0,-4),fontSize:"md",p:"3",variant:"top-accent",as:v,children:[e.jsxs(u,{fontWeight:"600",fontSize:"md",alignSelf:"start",children:[e.jsx(j,{as:ia,boxSize:"16px"}),e.jsx(l,{children:"Rating Aduan Rata Rata"})]}),e.jsxs(u,{pt:"2",alignSelf:"center",children:[e.jsx(j,{as:h.icon,color:h.color,boxSize:"50px"}),e.jsxs(u,{align:"baseline",spacing:"1",children:[e.jsx(l,{fontWeight:"600",fontSize:"3xl",children:o.toFixed(2)}),e.jsx(l,{children:"/5.00"})]})]}),e.jsxs(l,{children:["Total Aduan : ",x," Aduan"]})]}),e.jsx(l,{fontWeight:"600",children:"Jumlah aduan berdasarkan bintang"}),e.jsx(A,{w:"full",gap:"2",templateColumns:"repeat(auto-fit, minmax(100px, 1fr))",children:c.map((s,p)=>({ratingIcon:B[4-p],rating:5-p,count:s})).map(({ratingIcon:s,count:p,rating:d})=>e.jsxs(v,{p:"2",spacing:"1",rounded:"md",bg:s.color.slice(0,-4)+".100",cursor:"pointer",_active:{bg:s.color.slice(0,-4)+".200"},onClick:()=>r(d),children:[e.jsxs(u,{children:[e.jsx(l,{fontSize:"xl",fontWeight:"600",w:"1ex",children:p}),e.jsx(j,{as:s.icon,boxSize:"30px",color:s.color})]}),e.jsxs(l,{children:["Bintang ",d]})]},d))}),e.jsxs(u,{justify:"space-between",mt:"3",children:[e.jsx(l,{fontWeight:"600",children:"Filter aduan di peta"}),e.jsx(q,{value:i.toString(),onChange:s=>r(parseInt(s.target.value)),w:"140px",cursor:"pointer",children:Array.from({length:6},(s,p)=>e.jsx("option",{value:p,children:p?"Rating "+p:"Semua Rating"},p))})]})]}),e.jsx(Ze,{flex:"2 1 0",minH:"300px",marker:Qe.RatingMarker,scrollWheelZoom:!1,companiesData:[n],data:g.filter(s=>i?s.rating==i:!0)})]}):e.jsxs(u,{justify:"center",py:"10",spacing:"3",color:"gray.500",children:[e.jsx(j,{as:Z,boxSize:"45px"}),e.jsx(l,{fontSize:"xl",fontWeight:"500",children:"Tidak Ada Aduan"})]})})})}function pa({state:a,type:n,format:t}){const[i,r]=a,o=c=>r(f(i).add(c,n).format(t));return e.jsxs(u,{spacing:"1",justify:"space-between",children:[e.jsx(L,{bg:"white",variant:"outline",icon:e.jsx(be,{}),"aria-label":"previous",onClick:()=>o(-1)}),e.jsx(Je,{fontWeight:"600",variant:"outline",onFocus:c=>c.target.showPicker(),type:n,bg:"white",w:"fit-content",textAlign:"center",max:f().format(t),onChange:c=>r(c.target.value),value:i}),e.jsx(L,{variant:"outline",icon:e.jsx(ve,{}),"aria-label":"next",bg:"white",isDisabled:f(i).isSameOrAfter(f().startOf(n)),onClick:()=>o(1)}),e.jsx(R,{variant:"outline",bg:"white",onClick:()=>r(f().format(t)),children:n=="month"?"Bulan Ini":"Minggu Ini"})]})}function ua(a){const{state:n,getInputProps:t,getRadioProps:i}=ke(a),r=b.useRef(),o=t(),c=i();return e.jsxs(R,{onClick:()=>{var x;return(x=r.current)==null?void 0:x.click()},as:"label",borderColor:"teal.400",variant:n.isChecked?"solid":"outline",children:[e.jsx("input",{...o}),e.jsx(m,{...c,ref:r,display:"none"}),a.children]})}function ga({options:a,...n}){const{getRootProps:t,getRadioProps:i}=Se({...n}),r=t();return e.jsx(Q,{size:"sm",isAttached:!0,rowGap:"2",flexWrap:"wrap",colorScheme:"teal",variant:"outline",...r,children:a.map(o=>{const c=i({value:o});return e.jsx(ua,{...c,children:o},o)})})}const z="Dalam perusahaan",P="Sekitar perusahaan",W="Keduanya";function _({title:a,tren:n,eventLogs:t,paramList:i}){const[r,o]=b.useState([z,P]),[c,x]=b.useState(!0),g=r.map(h=>h==z?"indoor":"outdoor");return e.jsxs(k,{size:w,shadow:"xs",children:[e.jsxs(O,{as:u,justify:"space-between",children:[e.jsx(l,{fontWeight:"600",fontSize:"lg",children:a}),e.jsxs(u,{as:"label",userSelect:"none",children:[e.jsx(l,{fontSize:"sm",children:"Tampilkan Kegiatan Perusahaan"}),e.jsx(ea,{checked:c,onChange:h=>x(h.target.checked)})]})]}),n.length?e.jsx(e.Fragment,{children:e.jsx(C,{pt:"0",children:e.jsxs(ee,{isLazy:!0,variant:"unstyled",colorScheme:"teal",size:"sm",children:[e.jsxs(te,{gap:"4",flexWrap:"wrap",children:[e.jsx(Q,{size:"sm",rowGap:"2",isAttached:!0,flexWrap:"wrap",colorScheme:"teal",variant:"outline",children:i.map((h,s)=>e.jsx(se,{as:R,px:"3",borderColor:"teal.400",_selected:{bg:"teal.500",color:"white",_hover:{bg:"teal.600"}},children:h.name},s))}),e.jsx(X,{}),e.jsx(ga,{options:[z,P,W],value:r.length==2?W:r[0],onChange:h=>{o(([s])=>h==W?[s,s==z?P:z]:[h])}})]}),e.jsx(K,{mt:"4"}),e.jsx(ae,{children:i.map((h,s)=>e.jsx(ne,{h:"440px",p:"0",children:h.type=="bar"?e.jsx(Ke,{data:n||[],tooltipLabel:h.name,tickFormat:"DD MMM YYYY",offsetDomain:"day",dataKeyTypeAndFunc:g.map(p=>h.dataKeyTypeAndFunc(p)),eventLogs:c?t:[]}):e.jsx(Ye,{data:n||[],tickFormat:"DD MMM YYYY",gasType:h.name,dataKeyTypeAndFunc:g.map(p=>h.dataKeyTypeAndFunc(p)),eventLogs:c?t:[]})},s))})]})})}):e.jsx(y,{w:"full",pt:"5",pb:"8",children:e.jsx(l,{fontWeight:"600",color:"gray.500",fontSize:"xl",children:"Tidak Ada Data"})})]})}const ma=[{type:"bar",name:"ISPU",dataKeyTypeAndFunc:a=>({func:n=>{var t,i;return(i=(t=n[a])==null?void 0:t.ispu)==null?void 0:i[0]},envType:a})},{type:"bar",name:"ISPU PM2.5",dataKeyTypeAndFunc:a=>({func:n=>{var t,i;return(i=(t=n[a])==null?void 0:t.ispu)==null?void 0:i.find(r=>r.pollutant=="PM25")},envType:a})},{type:"bar",name:"ISPU PM10",dataKeyTypeAndFunc:a=>({func:n=>{var t,i;return(i=(t=n[a])==null?void 0:t.ispu)==null?void 0:i.find(r=>r.pollutant=="PM100")},envType:a})},{type:"line",name:"PM2.5",dataKeyTypeAndFunc:a=>({func:n=>{var t;return{value:(t=n[a])==null?void 0:t.pm25}},envType:a})},{type:"line",name:"PM10",dataKeyTypeAndFunc:a=>({func:n=>{var t;return{value:(t=n[a])==null?void 0:t.pm100}},envType:a})}],ja=[{type:"line",name:"CH4",dataKeyTypeAndFunc:a=>({func:n=>{var t;return(t=n[a])==null?void 0:t.ch4},envType:a})},{type:"line",name:"CO2",dataKeyTypeAndFunc:a=>({func:n=>{var t;return(t=n[a])==null?void 0:t.co2},envType:a})}],$={month:{inputFormat:"YYYY-MM",format:"MMMM YYYY",label:"bulan"},week:{inputFormat:"YYYY-[W]ww",format:"[ke-]ww YYYY",label:"minggu"}};function Ha(){var G,E;const[a,n]=b.useState("month"),{inputFormat:t,format:i,label:r}=$[a],[o,c]=b.useState(f().format(t)),{user:x}=U(),[g,h]=b.useState(""),s=(E=(G=x.view)==null?void 0:G.company)==null?void 0:E.companyId,p=s?`/companies/${s}/summary?type=${a}&periode=${o}`:null,{data:d}=Ce(p,we);if(!s)return e.jsx(xe,{selectCompanyOnly:!0});b.useEffect(()=>{h(p)},[p]);const M=le=>{const H=le.target.value;n(H),c(f().format($[H].inputFormat))};return e.jsxs(m,{children:[e.jsxs(S,{gap:"4",flexWrap:"wrap",align:"stretch",justify:"space-between",children:[e.jsxs(m,{children:[e.jsxs(J,{size:"lg",children:["Laporan ",r," ",f(o).format(i)]}),e.jsx(l,{color:"dimmed",children:d?`${f(d.meta.startDate).format("DD MMMM YYYY")} s/d ${f(d.meta.endDate).format("DD MMMM YYYY")}`:"Mengambil Data ..."})]}),e.jsxs(u,{flexWrap:"wrap",spacing:"2",justify:"space-between",children:[e.jsxs(m,{children:[e.jsx(l,{mb:"1",fontSize:"sm",children:"Pilih Jenis Laporan"}),e.jsxs(q,{w:"fit-content",bg:"white",fontWeight:"600",value:a,onChange:M,children:[e.jsx("option",{value:"month",children:"Laporan Bulanan"}),e.jsx("option",{value:"week",children:"Laporan Mingguan"})]})]}),e.jsxs(m,{children:[e.jsxs(l,{mb:"1",fontSize:"sm",children:["Navigasi ke ",r.toLowerCase()," lain"]}),e.jsx(pa,{state:[o,c],type:a,format:t})]})]})]}),d&&g==p?e.jsxs(v,{align:"stretch",spacing:"4",mt:"6",children:[e.jsx(T,{title:"Kualitas Udara (ISPU)",colorScheme:"telegram",icon:aa}),d.tren.length>0?e.jsxs(e.Fragment,{children:[e.jsx(ra,{indoor:d.averageData.indoor,outdoor:d.averageData.outdoor}),e.jsx(da,{indoor:d.averageData.indoor,outdoor:d.averageData.outdoor}),e.jsx(_,{title:"Tren Kualitas Udara",tren:d.tren,eventLogs:d.eventLogs.eventLogs,paramList:ma})]}):e.jsx(N,{children:"Data Tidak Tersedia"}),e.jsx(T,{title:"Emisi Gas Rumah Kaca (CO2 dan CH4)",colorScheme:"teal",icon:na}),d.tren.length>0?e.jsxs(e.Fragment,{children:[e.jsx(la,{indoor:d.averageData.indoor,outdoor:d.averageData.outdoor}),e.jsx(xa,{indoor:d.averageData.indoor,outdoor:d.averageData.outdoor}),e.jsx(_,{title:"Tren Emisi Gas Rumah Kaca",tren:d.tren,eventLogs:d.eventLogs.eventLogs,paramList:ja})]}):e.jsx(N,{children:"Data Tidak Tersedia"}),e.jsx(T,{title:"Aduan Di Sekitar",colorScheme:"orange",icon:Z}),e.jsx(ha,{data:d.reports,company:d.meta.company}),e.jsx(T,{title:"Catatan Kegiatan Perusahaan",colorScheme:"purple",icon:Me}),e.jsx(oa,{periode:a,data:d.eventLogs,dateRange:[d.meta.startDate,d.meta.endDate]})]}):e.jsx(u,{py:"20",justify:"center",children:e.jsx(ze,{})})]})}function T({title:a,icon:n,colorScheme:t}){return e.jsxs(u,{bg:`${t}.100`,p:"2",spacing:"0",rounded:"md",w:"fit-content",shadow:"sm",children:[e.jsx(y,{p:"1",rounded:"md",bg:`${t}.50`,color:`${t}.500`,children:e.jsx(j,{as:n,boxSize:"24px"})}),e.jsx(J,{size:"md",mx:"3",fontWeight:"600",children:a})]})}function Y({title:a,...n}){return e.jsxs(k,{size:w,shadow:"xs",flexGrow:"1",children:[a&&e.jsx(O,{fontWeight:"600",fontSize:"lg",children:a}),e.jsx(C,{pt:"0",as:oe,direction:"row",divider:e.jsx(Ge,{}),...n})]})}function N({icon:a,...n}){return e.jsx(k,{size:w,shadow:"xs",flexGrow:"1",children:e.jsxs(C,{as:u,justify:"center",py:"10",spacing:"3",color:"gray.500",children:[e.jsx(j,{as:sa,boxSize:"45px"}),e.jsx(l,{fontSize:"xl",fontWeight:"500",children:n.children})]})})}export{Y as CardSection,N as NoData,Ha as default};
