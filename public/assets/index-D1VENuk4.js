import{H as ce,j as e,L as N,M as E,K as f,J as C,N as H,V as j,T as i,r as Me,a1 as xe,$ as ue,a4 as ze,I as we}from"./createReactComponent-BjMSnX4u.js";import{C as We,S as Ne}from"./CardEventLog-BnLTDDMC.js";import{x as He,u as G,C as Ue,y as B,q as S,z as Ae,v as se,B as Oe,l as U,D as Fe,b as Ke,f as Le,L as Re}from"./app-Dlg_0vKY.js";import{I as he}from"./IconNotebookOff-D8swxcfr.js";import{H as d,C as A}from"./icon-CgCgY_AD.js";import{c as g,B as D}from"./axios-DSJo49NX.js";import{T as k,t as Ye}from"./dateFormating-BW4zoMdD.js";import{M as Ee,a as ne}from"./index-CmYfqyqM.js";import{a as Ge}from"./index.tags-CTXl78sl.js";import{T as re}from"./TagWithIcon-BjtYG5-s.js";import{g as O,b as R,d as Y}from"./common.utils-T8z9TsUm.js";import{I as Be}from"./IconCalendar-CF1fZF0p.js";import{F as M}from"./chunk-KRPLQIP4-CDbFQY1-.js";import{a as Ve}from"./ReportCard-CQq-mUEi.js";import{N as te}from"./AddNodeSubscription-Bl36AeS8.js";import{G as me,M as pe,T as je,a as ge,b as fe,c as z,U as _e}from"./MyLineChart-Dz70Kllk.js";import{d as ye,M as ie,S as be,I as $e}from"./ISPUChart-ZTeo4bNe.js";import{T as V,a as w}from"./chunk-IAXSQ4X2-Ev1MD7D1.js";import{T as _,a as $,b as W}from"./chunk-4YMKQ5D4-CSotNFLB.js";import{I as Xe}from"./IconDatabaseX-ByCuWNbD.js";import{G as qe}from"./chunk-JARCRF6W-Cx94atoP.js";import{I as Je}from"./IconBuilding-K0rC28MR.js";import{I as oe}from"./IconTrees-DecgdE1d.js";import{I as le}from"./IconCirclePlus-XtyQ80kD.js";import"./IconMapPin-Cm_Rdr-X.js";import"./IconTrash-DOqppO8G.js";import"./IconEdit-Chltx2AE.js";import"./chunk-4FCEGNGT-Dke9LU8Y.js";/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ze=ce("outline","circle-x","IconCircleX",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M10 10l4 4m0 -4l-4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var F=ce("outline","history","IconHistory",[["path",{d:"M12 8l0 4l2 2",key:"svg-0"}],["path",{d:"M3.05 11a9 9 0 1 1 .5 4m-.5 5v-5h5",key:"svg-1"}]]);function Qe({data:t,...n}){return e.jsxs(N,{...n,children:[e.jsxs(E,{pb:"0",as:d,children:[e.jsx(A,{border:"2px solid",borderColor:"orange.200",color:"orange.500",rounded:"md",p:"1",boxSize:"45px",children:e.jsx(f,{as:He,boxSize:"28px"})}),e.jsxs(g,{ml:"1",children:[e.jsx(C,{size:"md",children:"Kegiatan terkini"}),e.jsxs(k,{mt:"1",children:[t.length," Kegiatan Terkini"]})]})]}),e.jsx(H,{children:e.jsx(j,{align:"stretch",children:t.length?e.jsx(e.Fragment,{children:t.map(a=>e.jsx(We,{event:a},a.eventLogId))}):e.jsxs(d,{justify:"center",color:"gray.500",py:"3",children:[e.jsx(he,{stroke:"1.2",size:"40"}),e.jsx(i,{fontWeight:"500",fontSize:"lg",children:"Tidak ada Kegiatan Berlangsung"})]})})})]})}function ea({data:t}){var q,J;const{dashboardInfo:n,nodes:a}=t,{name:s,type:r,coordinate:o,countNodes:l,companyId:c,userId:p,createdAt:x}=n,[h,u]=Me.useState(null),{roleIsNot:b,roleIs:X,user:ve}=G(),K=(I="outdoor")=>{var v,T,Z,Q,ee;return[{name:"ISPU",currentData:(v=a[I])==null?void 0:v.map(m=>{var ae;const y=(ae=m.latestData)==null?void 0:ae.ispu;if(!y)return{...m,data:{name:"ISPU"}};const{datetime:P,value:L}=y;if(!L||!L[0])return{...m,data:{name:"ISPU"}};const{ispu:De,category:Te}=L[0];return{...m,data:{name:"ISPU",datetime:P,value:De,color:O(Te).colorScheme}}})},{name:"PM2.5",currentData:(T=a[I])==null?void 0:T.map(m=>{var y;return{...m,data:{name:"PM2.5",...(y=m.latestData)==null?void 0:y.pm25}}})},{name:"PM10",currentData:(Z=a[I])==null?void 0:Z.map(m=>{var y;return{...m,data:{name:"PM10",...(y=m.latestData)==null?void 0:y.pm100}}})},{name:"CH4",currentData:(Q=a[I])==null?void 0:Q.map(m=>{if(!m.latestData)return{...m,data:{name:"CH4"}};const{datetime:y,value:P}=m.latestData.ch4;return{...m,data:{name:"CH4",datetime:y,value:P.value,color:""}}})},{name:"CO2",currentData:(ee=a[I])==null?void 0:ee.map(m=>{if(!m.latestData)return{...m,data:{name:"CO2"}};const{datetime:y,value:P}=m.latestData.co2;return{...m,data:{name:"CO2",datetime:y,value:P.value,color:""}}})}]},Ce={name:s,type:r,coordinate:o,companyId:c,indoorNodeValue:h!==null?K("indoor")[h].currentData:null},ke=h!==null?K()[h].currentData:a.outdoor,Pe=s||"Dasbor "+(X(["admin","gov"])?(J=(q=ve.view)==null?void 0:q.user)==null?void 0:J.name:"Anda");return e.jsx(N,{size:"sm",w:"full",children:e.jsxs(H,{as:M,gap:"5",children:[e.jsx(Ee,{w:"60%",h:"275px",companiesData:c?[Ce]:[],marker:h===null?ne.DetailNodesMarker:ne.ValueMarker,data:ke||[]}),e.jsxs(j,{align:"start",p:"1",flexGrow:"1",children:[e.jsxs(d,{mt:"6",children:[e.jsx(Ue,{type:r}),e.jsx(C,{size:"md",fontWeight:"600",children:Pe})]}),e.jsxs(d,{mt:"2",children:[!!x&&e.jsx(e.Fragment,{children:e.jsx(re,{icon:Be,colorScheme:"blue",children:`Dibuat pada ${Ye(x)}`})}),r!=="regular"&&e.jsx(Ge,{value:r}),e.jsx(re,{icon:B,children:l+" Node"})]}),e.jsx(S,{}),l>0?e.jsxs(g,{children:[e.jsx(i,{children:"Tampilkan nilai dari parameter : "}),e.jsx(M,{flexWrap:"wrap",gap:"3",mt:"1",children:K().map((I,v)=>e.jsx(D,{size:"sm",colorScheme:"teal",border:"1px solid",borderColor:"teal.500",variant:h==v?"solid":"outline",onClick:()=>u(T=>T!=v?v:null),children:I.name},v))})]}):e.jsx(xe,{fontSize:"md",status:"warning",rounded:"md",children:e.jsxs(i,{children:["Tidak ada node yang dapat dianalisis.",e.jsx("br",{}),"Tambahkan node untuk memulai memantau kualitas udara"]})}),e.jsxs(d,{justify:"end",w:"full",mt:"4",children:[b("regular")&&e.jsx(Ae,{colorScheme:"blue",selectCompanyOnly:b(["admin","gov"]),children:"Ganti Dashboard"}),X(["admin","gov"])&&r=="regular"&&e.jsx(se,{to:`/users/${p}`,children:e.jsx(D,{colorScheme:"blue",ml:"2",children:"Detail Pengguna"})}),!!c&&e.jsx(se,{to:`/companies/${c}`,children:e.jsx(D,{colorScheme:"blue",ml:"2",children:"Detail Perusahaan"})})]})]})]})})}function aa({data:t,...n}){return e.jsxs(N,{...n,children:[e.jsxs(E,{pb:"0",as:d,children:[e.jsx(A,{border:"2px solid",borderColor:"yellow.200",color:"yellow.500",rounded:"md",p:"1",boxSize:"45px",children:e.jsx(f,{as:Oe,boxSize:"28px"})}),e.jsxs(g,{ml:"1",children:[e.jsx(C,{size:"md",children:"Aduan terkini"}),e.jsxs(k,{mt:"1",children:[t.length," Aduan terkini"]})]})]}),e.jsxs(H,{children:[e.jsx(i,{mb:"4",children:"Aduan dalam radius 250 meter dari lokasi perusahaan Anda dalam 24 jam terakhir"}),e.jsx(j,{align:"stretch",children:t.length?t.map(a=>e.jsx(Ve,{border:"1px solid",rounded:"lg",borderColor:"gray.200",size:"sm",data:a},a.reportId)):e.jsxs(d,{justify:"center",color:"gray.500",py:"3",children:[e.jsx(he,{stroke:"1.2",size:"40"}),e.jsx(i,{fontWeight:"500",fontSize:"lg",children:"Tidak ada Aduan di sekitar"})]})})]})]})}const sa="/assets/opss-BHGvqmEc.png";function na({CH4data:t,CO2data:n}){const a=[{symbol:"CO2",name:"Karbondioksida",max:pe,threshold:je,data:n},{symbol:"CH4",name:"Metana",threshold:ge,max:fe,data:t}];return e.jsxs(e.Fragment,{children:[e.jsx(d,{w:"full",justify:"space-evenly",px:"2",py:"3",border:"1px solid",borderColor:"gray.300",rounded:"5",children:a.map(({symbol:s,name:r,threshold:o,data:l,max:c},p)=>{const{value:x,category:h}=l.average.data.value,{colorScheme:u}=s=="CO2"?R(h):Y(h);return e.jsxs(j,{spacing:"1",h:"86px",children:[e.jsxs(d,{color:"gray.600",alignSelf:"start",fontSize:"lg",spacing:"1",children:[e.jsxs(i,{fontWeight:"600",children:[s.slice(0,2),e.jsx("sub",{children:s[2]})]}),e.jsx(i,{fontWeight:"600",children:r})]}),e.jsxs(d,{children:[e.jsxs(g,{children:[e.jsx(i,{fontSize:"xl",fontWeight:"600",children:x+" PPM"}),e.jsx(k,{w:"full",fontSize:"md",justifyContent:"center",colorScheme:u,children:h})]}),e.jsx(ye,{style:{width:"125px"},arcsLength:o,colors:me,percent:x>=c?1:x/c,arcPadding:.02,hideText:!0})]})]},p)})}),e.jsx(d,{w:"full",children:a.map(({symbol:s,data:r},o)=>e.jsx(j,{flex:"1 1 0px",border:"1px solid",borderColor:"gray.300",rounded:"5",py:"2",px:"4",children:[r.highest,r.lowest].map(({name:l,data:{value:c}},p)=>e.jsxs(d,{spacing:"1",w:"full",justify:"space-between",children:[e.jsxs(g,{children:[e.jsxs(d,{color:"gray.700",spacing:"1",fontWeight:"600",children:[e.jsxs(i,{children:[s.slice(0,2),e.jsx("sub",{children:s[2]})]}),e.jsx(i,{children:p?"Terendah":"Tertinggi"})]}),e.jsx(d,{color:"gray.600",mt:"1",children:e.jsx(i,{fontSize:"sm",children:l})})]}),e.jsxs(j,{spacing:"0",children:[e.jsx(i,{fontSize:"lg",fontWeight:"600",children:c.value+" PPM"}),e.jsx(k,{fontSize:"md",w:"full",justifyContent:"center",colorScheme:(s=="CO2"?R(c.category):Y(c.category)).colorScheme,children:c.category})]})]},p))},o))}),e.jsx(S,{}),e.jsxs(d,{justify:"end",w:"full",children:[e.jsx(f,{as:F,boxSize:"18px"}),e.jsxs(i,{children:["Data diperbarui pada"," ",U(t.average.data.datetime).format("HH:mm DD MMM YYYY")]})]})]})}function ra({CO2data:t,CH4data:n}){const a=[{symbol:"CH4",name:"Metana",threshold:ge,max:fe,data:n},{symbol:"CO2",name:"Karbondioksida",max:pe,threshold:je,data:t}];return e.jsxs(e.Fragment,{children:[e.jsx(d,{w:"full",justify:"space-evenly",px:"2",h:"calc(168px + 1em)",border:"1px solid",borderColor:"gray.300",rounded:"5",children:a.map(({symbol:s,name:r,threshold:o,data:l,max:c},p)=>{const{value:x,category:h}=l.latestData.value,{colorScheme:u}=s=="CO2"?R(h):Y(h);return e.jsxs(j,{spacing:"1",children:[e.jsxs(d,{color:"gray.600",fontSize:"lg",children:[e.jsxs(i,{fontWeight:"700",children:[s.slice(0,2),e.jsx("sub",{children:s[2]})]}),e.jsx(i,{fontWeight:"500",children:r})]}),e.jsx(ye,{style:{width:"125px"},arcsLength:o,colors:me,percent:x>c?1:x/c,arcPadding:.02,hideText:!0}),e.jsx(i,{fontSize:"2xl",fontWeight:"600",children:x+" PPM"}),e.jsx(k,{w:"full",fontSize:"md",py:"1",justifyContent:"center",colorScheme:u,children:h})]},p)})}),e.jsxs(_,{w:"full",children:[e.jsx(V,{children:e.jsx(w,{_active:{bg:"initial"},children:"Tren Gas Emisi Rumah Kaca"})}),e.jsx($,{children:e.jsxs(W,{children:[e.jsxs(g,{h:"110px",w:"full",children:[e.jsx(i,{fontWeight:"600",mb:"2",children:"Tren Gas Metana (CH4)"}),e.jsx(z,{simple:!0,data:n.tren,gasType:"CH4",dataKeyTypeAndFunc:{func:s=>s.value}})]}),e.jsxs(g,{mt:"8",h:"110px",w:"full",children:[e.jsx(i,{fontWeight:"600",mb:"2",children:"Tren Karbondioksida (CO2)"}),e.jsx(z,{simple:!0,gasType:"CO2",data:t.tren,dataKeyTypeAndFunc:{func:s=>s.value}})]})]})})]}),e.jsx(S,{}),e.jsxs(d,{justify:"end",w:"full",children:[e.jsx(f,{as:F,boxSize:"18px"}),e.jsxs(i,{children:["Data diperbarui pada"," ",U(n.latestData.datetime).format("HH:mm DD MMM YYYY")]})]})]})}function ta({data:t}){const{latestData:{datetime:n,value:a},tren:s}=t;return e.jsxs(e.Fragment,{children:[a?e.jsxs(e.Fragment,{children:[e.jsx(Se,{value:a[0]}),e.jsx(d,{justify:"space-evenly",w:"full",children:a.map((r,o)=>e.jsx(ia,{value:r},o))})]}):e.jsx(Ie,{}),e.jsxs(_,{w:"full",children:[e.jsxs(V,{children:[e.jsx(w,{children:"Tren ISPU"}),e.jsx(w,{children:"Tren Pencemar"})]}),e.jsxs($,{children:[e.jsxs(W,{px:"0",children:[e.jsxs(g,{h:"110px",children:[e.jsx(i,{fontWeight:"600",mb:"2",children:"Tren ISPU PM2.5"}),e.jsx(ie,{data:s,simple:!0,tooltipLabel:"ISPU PM2.5",dataKeyTypeAndFunc:{func:r=>(r.value||[]).find(o=>o.pollutant=="PM25")}})]}),e.jsxs(g,{mt:"8",h:"110px",children:[e.jsx(i,{fontWeight:"600",mb:"2",children:"Tren ISPU PM10"}),e.jsx(ie,{data:s,tooltipLabel:"ISPU PM10",simple:!0,dataKeyTypeAndFunc:{func:r=>(r.value||[]).find(o=>o.pollutant=="PM100")}})]})]}),e.jsxs(W,{px:"0",children:[e.jsxs(g,{h:"110px",children:[e.jsx(i,{fontWeight:"600",mb:"2",children:"Tren Pencemar PM2.5"}),e.jsx(z,{simple:!0,gasType:"PM2.5",data:s,dataKeyTypeAndFunc:{func:r=>(r.value||[]).find(o=>o.pollutant=="PM25")}})]}),e.jsxs(g,{mt:"8",h:"110px",children:[e.jsx(i,{fontWeight:"600",mb:"2",children:"Tren Pencemar PM10"}),e.jsx(z,{simple:!0,gasType:"PM10",data:s,dataKeyTypeAndFunc:{func:r=>(r.value||[]).find(o=>o.pollutant=="PM100")}})]})]})]})]}),e.jsx(S,{}),!!a&&e.jsxs(d,{justify:"end",w:"full",children:[e.jsx(f,{as:F,boxSize:"18px"}),e.jsxs(i,{children:["ISPU Pukul ",U(n).format("HH:mm DD MMM YYYY")]})]})]})}function ia({value:t,...n}){const{category:a,ispu:s,pollutant:r,pollutantValue:o}=t,{colorScheme:l}=O(a);return e.jsxs(d,{as:M,bg:l+".100",py:"6px",h:"59px",px:"4",rounded:"md",spacing:"4",divider:e.jsx(be,{borderColor:l+".200"}),...n,children:[e.jsx(i,{fontSize:"xl",fontWeight:"600",children:r}),e.jsxs(g,{children:[e.jsx(i,{fontSize:"2xl",fontWeight:"600",children:s<=300?s:"300+"}),e.jsxs(i,{fontSize:"sm",children:[o.toFixed(2)," ",_e]})]})]})}function Se({value:t,...n}){const{category:a,ispu:s,pollutant:r}=t,{colorScheme:o,icon:l}=O(a);return e.jsxs(d,{w:"full",spacing:"4",p:"2",bg:o+".100",rounded:"5",...n,children:[e.jsxs(j,{rounded:"3",align:"start",boxSize:"95px",p:"2",spacing:"0",bg:o+".200",children:[e.jsx(i,{fontStyle:"italic",children:"ISPU"}),e.jsx(S,{}),e.jsx(i,{textAlign:"center",w:"full",fontSize:"4xl",fontWeight:"700",children:s<=300?s:"300+"})]}),e.jsxs(j,{align:"start",spacing:"2",children:[e.jsx(C,{as:"p",size:"lg",children:a}),e.jsxs(k,{colorScheme:o,variant:"outline",children:["Polutan Utama : ",r]})]}),e.jsx(S,{}),e.jsx(f,{boxSize:"90px",strokeWidth:"1.5px",color:o+".400",as:l})]})}function Ie(){return e.jsxs(d,{flexGrow:"1",w:"full",spacing:"4",px:"2",py:"8",rounded:"5",color:"gray.500",children:[e.jsx(f,{boxSize:"60px",strokeWidth:"1.5px",as:Xe}),e.jsxs(g,{children:[e.jsx(i,{fontWeight:"600",fontSize:"xl",color:"gray.600",children:"ISPU Terkini tidak dapat dikalkulasi"}),e.jsxs(i,{children:["Data tidak mencukupi, tunggu sensor mengirimkan data tambahan."," "]})]})]})}function oa({data:t}){var x,h;const{highest:n,lowest:a,average:s}=t,r=(x=n.data.value)==null?void 0:x[0],o=(h=a.data.value)==null?void 0:h[0],{value:l,datetime:c}=s.data;if(!l||!r||!o)return e.jsx(Ie,{});const p=[{nodeName:n.name,ispuData:r},{nodeName:a.name,ispuData:o}];return e.jsxs(e.Fragment,{children:[e.jsx(Se,{value:l[0]}),e.jsx(ue,{direction:"row",spacing:"4",w:"full",justifyContent:"space-evenly",children:p.map((u,b)=>e.jsx(la,{data:u,label:b?"Terendah":"Tertinggi"},b))}),e.jsx(S,{}),e.jsxs(d,{justify:"end",w:"full",children:[e.jsx(f,{as:F,boxSize:"18px"}),e.jsxs(i,{children:["ISPU Pukul ",U(c).format("HH:mm DD MMM YYYY")]})]})]})}function la({data:t,label:n}){const{category:a,ispu:s}=t.ispuData,{colorScheme:r}=O(a);return e.jsxs(j,{minW:"200px",spacing:"0",rounded:"md",align:"start",px:"4",py:"3",justify:"center",bg:r+".100",children:[e.jsx(i,{fontWeight:"500",children:n}),e.jsxs(d,{w:"full",justify:"space-between",children:[e.jsx(i,{fontSize:"2xl",fontWeight:700,children:s<=300?s:"300+"}),e.jsx(k,{bg:r+".300",children:a})]}),e.jsxs(d,{spacing:"1",children:[e.jsx(B,{size:"16"}),e.jsx(i,{w:"full",noOfLines:1,fontSize:"sm",children:t.nodeName})]})]})}function da({data:t,type:n,isSingleNode:a}){var c,p,x,h;const s=a?(p=(c=t.ispu)==null?void 0:c.latestData.value)==null?void 0:p[0].recomendation:(h=(x=t.ispu)==null?void 0:x.average.data.value)==null?void 0:h[0].recomendation,r=a?t.ch4.latestData.value.recomendation:t.ch4.average.data.value.recomendation,o=a?t.co2.latestData.value.recomendation:t.co2.average.data.value.recomendation,l=[{label:"Kualitas Udara",recomendation:s},{label:"Emisi Karbondioksida",recomendation:o},{label:"Emisi Metana",recomendation:r}].filter(u=>u.recomendation);return e.jsxs(xe,{mt:"6",status:"info",variant:"left-accent",rounded:"sm",bg:"blue.50",alignItems:"start",children:[e.jsx(f,{as:$e,boxSize:"7",color:"blue.600",mt:"1"}),e.jsxs(_,{ml:"3",variant:"soft-rounded",colorScheme:"blue",children:[e.jsxs(V,{as:d,children:[e.jsx(ze,{fontWeight:"600",children:"Rekomendasi"}),e.jsx(S,{}),l.map((u,b)=>e.jsx(w,{rounded:"lg",py:"1",children:u.label},b))]}),e.jsx($,{pb:"2",children:l.map(({recomendation:u},b)=>e.jsx(W,{px:"0",py:"2",as:j,align:"start",children:e.jsxs(qe,{gap:"6",templateColumns:"repeat(auto-fit, minmax(300px, 1fr))",children:[e.jsx(i,{textIndent:"2em",fontSize:"md",textAlign:"justify",children:u==null?void 0:u.info}),e.jsxs(i,{fontSize:"md",textAlign:"justify",children:[e.jsxs(i,{fontWeight:"600",as:"span",children:["Saran :"," "]}),n=="indoor"?u==null?void 0:u.company:u==null?void 0:u.public]})]})},b))})]})]})}const ca={indoor:{icon:Je,color:"blue",title:"Kualitas udara di perusahaan"},outdoor:{icon:oe,color:"green",title:"Kualitas udara di sekitar perusahaan"},arround:{icon:oe,color:"green",title:"Kualitas udara di sekitar"}};function de({data:t,type:n}){const{data:a,countNodes:s,analiysisDataType:r}=t,o=r=="single",l=s.all-s.active,{icon:c,color:p,title:x}=ca[n];return e.jsxs(N,{children:[e.jsx(E,{pb:"1",children:e.jsxs(d,{children:[e.jsx(A,{border:"2px solid",borderColor:p+".200",color:p+".500",rounded:"md",p:"1",boxSize:"45px",children:e.jsx(f,{as:c,boxSize:"28px"})}),e.jsxs(g,{children:[e.jsx(C,{size:"md",children:x}),!!a&&e.jsxs(d,{spacing:"4",children:[e.jsxs(d,{children:[e.jsx(f,{as:B}),e.jsx(i,{children:o?a.node.name:`Rerata dari ${s.active} node`})]}),!!l&&e.jsxs(d,{children:[e.jsx(f,{as:Ze}),e.jsxs(i,{children:[l," Node Tidak Aktif"]})]})]})]})]})}),e.jsx(H,{children:s.active&&a?e.jsxs(e.Fragment,{children:[e.jsxs(ue,{divider:e.jsx(be,{borderColor:"gray.200"}),direction:"row",spacing:"5",children:[e.jsx(j,{flex:"1 1 0px",align:"start",spacing:"4",children:o?e.jsx(ta,{data:a.ispu}):e.jsx(oa,{data:a.ispu})}),e.jsx(j,{flex:"1 1 0px",align:"start",spacing:"4",children:o?e.jsx(ra,{CO2data:a.co2,CH4data:a.ch4}):e.jsx(na,{CH4data:a.ch4,CO2data:a.co2})})]}),e.jsx(da,{type:n,isSingleNode:o,data:a})]}):e.jsx(xa,{data:t,type:n})})]})}function xa({data:t,type:n}){var c,p,x;const{all:a,active:s}=t.countNodes,{user:r,roleIs:o}=G(),l=a-s;return e.jsxs(d,{justify:"center",px:"3",py:"6",children:[e.jsx(we,{src:sa,h:"140px"}),e.jsx(j,{align:"start",spacing:"1",children:a?e.jsxs(e.Fragment,{children:[e.jsx(C,{size:"md",children:"Tidak dapat menampilkan data"}),e.jsx(i,{color:"gray.500",fontStyle:"italic",children:"Tidak ada node yang aktif"}),e.jsxs(d,{mt:"3",spacing:"4",children:[e.jsx(A,{boxSize:"40px",border:"2px solid",borderColor:"orange.300",p:"2",rounded:"md",children:e.jsx(f,{as:Fe,color:"orange.500",boxSize:"full"})}),e.jsx(i,{fontWeight:"600",fontSize:"lg",children:`Data pada ${l} node tidak mutakhir `})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(C,{size:"md",mb:"2",children:["Belum Menambahkan Node ",n=="arround"?"":n]}),!o("gov")&&e.jsx(e.Fragment,{children:n=="arround"?e.jsx(te,{subsInfo:{type:"user",userId:((p=(c=r.view)==null?void 0:c.user)==null?void 0:p.userId)||r.userId},children:e.jsx(D,{colorScheme:"blue",leftIcon:e.jsx(le,{size:"18"}),children:"Tambahkan Node"})}):e.jsx(te,{subsInfo:{type:"company",companyData:(x=r.view)==null?void 0:x.company},children:e.jsx(D,{colorScheme:"blue",leftIcon:e.jsx(le,{size:"18"}),children:"Tambahkan Node"})})})]})})]})}function Ra(){const{user:t,roleIs:n,roleIsNot:a}=G(),{id:s,type:r}=ua(t);if(!r&&n(["admin","gov"]))return e.jsx(Ne,{selectCompanyOnly:!1});const o=s&&r?`${r==="company"?"/companies/":"/users/"}${s}/dashboard`:null,{data:l,isLoading:c}=Ke(o,Le);return c||!l?e.jsx(Re,{}):e.jsxs(j,{spacing:"4",align:"stretch",children:[e.jsx(ea,{data:l}),l.indoor&&e.jsx(de,{data:l.indoor,type:"indoor"}),e.jsx(de,{data:l.outdoor,type:l.dashboardInfo.type=="regular"?"arround":"outdoor"}),a("regular")&&e.jsxs(M,{w:"full",gap:"4",children:[e.jsx(Qe,{flex:"1 1 0 ",data:l.currentEventLogs}),e.jsx(aa,{flex:"1 1 0 ",data:l.nearReports})]})]})}function ua(t){const{view:n}=t;return n!=null&&n.company&&n.company.companyId?{type:"company",id:n.company.companyId}:n!=null&&n.user&&n.user.userId&&n.user.role=="regular"?{type:"user",id:n.user.userId}:{type:void 0,id:void 0}}export{Ra as default};
