import{j as e,a0 as I,W as M,Y as R,G as W,V as q,U as T}from"./font-5Mxaz-3e.js";import{u as E,a as V}from"./common.utils-28SvxYlP.js";import{n as w,a as H,b as N,d as D,e as G}from"./validator.utils-CftwUUTS.js";import{u as L,c as U,a as $,F as s,b as r}from"./index.esm-RWPM2pE6.js";import{B as k}from"./BigAlert-BSe31967.js";import{M as d}from"./MyRadio-DEbFUmzT.js";import{R as t}from"./RequiredIndicator-CZ0U0vjk.js";import{m as z,R as K}from"./app-DYChiyhM.js";import{F as n,c as m,B as O}from"./logo-white-CsuGh6aO.js";import{T as B}from"./chunk-4IH3O7BJ-Ckr7B5YK.js";import"./IconCirclePlus-BHNZ_8Qf.js";import"./logo-Byq_-Epn.js";function le(){const b=E(),{handleChange:l,handleBlur:o,isSubmitting:v,setSubmitting:A,touched:i,resetForm:u,setFieldValue:C,values:P,status:h,setStatus:p,setFieldError:S,errors:a,handleSubmit:y}=L({initialValues:{name:"",email:"",phone:"",description:"",role:"regular",address:"",profilePicture:""},validationSchema:U().shape({name:w.required("Wajib diisi"),phone:H.required("Wajib diisi"),address:N.required("Wajib diisi"),description:D.nullable(),email:G.required("Wajib diisi"),role:$().required("Wajib diisi")}),onSubmit:c=>{z.post("/users",V(c)).then(()=>{p({created:!0})}).catch(x=>{var g,f;if(((g=x.response)==null?void 0:g.status)!==400)return p({created:!1});const[F,j]=((f=x.response)==null?void 0:f.data.message)||[];S(F,j),b.error(j||"Ada yang salah")}).finally(()=>A(!1))}});return e.jsxs(I,{children:[e.jsx(M,{size:"lg",children:"Buat akun Pengguna"}),e.jsx(R,{color:"dimmed",children:"Buat Akun pengguna untuk memberikan akses orang lain ke sistem"}),e.jsx(W,{maxW:"container.sm",mt:"6",px:"0",children:h!==void 0?h.created?e.jsx(k,{status:"success",title:"Akun berhasil didaftarkan",description:`Alamat email terdaftar akan menerima tautan verifikasi. 
\r Klik tautan tersebut untuk mengaktifkan akun dan menyelesaikan pendaftaran.`,onCreateAgain:u}):e.jsx(k,{status:"warning",title:"Akun gagal didaftarkan",description:"Ada yang salah. Hubungi Administrator",onCreateAgain:u}):e.jsx("form",{onSubmit:y,className:"my-form",children:e.jsxs(q,{mx:"auto",spacing:"2",children:[e.jsxs(n,{isInvalid:!!a.name&&i.name,children:[e.jsxs(s,{children:["Nama ",e.jsx(t,{})]}),e.jsx(m,{id:"name",name:"name",placeholder:"Misal : Suparna",onChange:l,onBlur:o}),e.jsx(r,{children:a.name})]}),e.jsxs(n,{isInvalid:!!a.email&&i.email,children:[e.jsxs(s,{children:["Email ",e.jsx(t,{})]}),e.jsx(m,{id:"email",name:"email",placeholder:"Misal : suparna@gmail.com",onChange:l,onBlur:o}),e.jsx(r,{children:a.email})]}),e.jsxs(n,{isInvalid:!!a.phone&&i.phone,children:[e.jsxs(s,{children:["Nomor Telepon ",e.jsx(t,{})]}),e.jsx(m,{id:"phone",name:"phone",placeholder:"Misal : 087812345678",onChange:l,onBlur:o}),e.jsx(r,{children:a.phone})]}),e.jsxs(n,{isInvalid:!!a.address&&i.address,children:[e.jsxs(s,{children:["Alamat ",e.jsx(t,{})]}),e.jsx(B,{id:"address",name:"address",placeholder:"Masukkan Alamat Tempat tinggal Pengguna",onChange:l,onBlur:o}),e.jsx(r,{children:a.address})]}),e.jsxs(n,{isInvalid:!!a.description&&i.description,children:[e.jsx(s,{children:"Description"}),e.jsx(B,{id:"description",name:"description",placeholder:"Opsional",onChange:l,onBlur:o}),e.jsx(r,{children:a.description})]}),e.jsxs(n,{isInvalid:!!a.role&&i.role,children:[e.jsxs(s,{children:["Peran pengguna ",e.jsx(t,{})]}),e.jsx(K,{onChange:c=>C("role",c),value:P.role,children:e.jsxs(T,{spacing:4,direction:"row",children:[e.jsx(d,{value:"regular",children:"Reguler"}),e.jsx(d,{value:"manager",children:"Manager"}),e.jsx(d,{value:"admin",children:"Admin"}),e.jsx(d,{value:"gov",children:"Pemerintah"})]})}),e.jsx(r,{children:a.role})]}),e.jsxs(n,{isInvalid:!!a.profilePicture&&i.profilePicture,children:[e.jsx(s,{children:"Foto Profil"}),e.jsx(m,{type:"file",id:"profilePicture",name:"profilePicture",onChange:l,onBlur:o,accept:"image/*",isDisabled:!0}),e.jsx(r,{children:a.profilePicture})]}),e.jsx(O,{isLoading:v,w:"full",mt:"4",colorScheme:"green",type:"submit",children:"Buat Akun"})]})})})]})}export{le as default};
