import{K as M,j as e,L as j,T as l,V as b,N as g,Q as v,U as k,a6 as B,r as S,S as W,M as _,a0 as ie}from"./createReactComponent-WPW12zrK.js";import{I as re,C as le,S as oe}from"./CardEventLog-8cU5ha4s.js";import{a6 as ce,a7 as de,x as xe,a1 as he,l as f,d as pe,a8 as ue,G as $,a as N,B as V,I as me,n as ge,a9 as je,aa as fe,q as ye,u as be,b as Se,f as ve,ab as ke}from"./app-B_fwFRhX.js";import{U as Ce,a as Me,b as ze,T as De,M as Ie,G as Te,c as we}from"./MyLineChart-CSrHJa4A.js";import{g as Ae,b as Re,d as Pe}from"./common.utils-BDtzQ6xa.js";import{d as We,I as Fe,M as Le,S as Ye}from"./ISPUChart-IitrUOqk.js";import{T as Oe,F as Ue,e as Ke,i as Ee,l as He,r as Ge}from"./EventCalendar-B7CrVatj.js";import{F as J}from"./chunk-KRPLQIP4-BfVHV2g3.js";import{H as h,C as y,D as F}from"./icon-BvDSS9q3.js";import{G as I}from"./chunk-JARCRF6W-DZGTgXcm.js";import{I as Be}from"./IconChevronUp-BA4ja6PZ.js";import{B as T,I as U,c as _e}from"./icon-white-BiuxQ1Ek.js";import{C as $e}from"./chunk-RKXMPHPI-CPbcJLZe.js";import{I as q}from"./IconTrees-D5I0s0qy.js";import{T as Q,a as X,b as Z}from"./chunk-4YMKQ5D4-BmSsW2IV.js";import{T as ee,a as ae}from"./chunk-IAXSQ4X2-BB3sunCX.js";import{M as Ne,a as Ve}from"./index-CQt-qjNZ.js";import{R as K}from"./ReportCard-8DBJjL8k.js";import{T as D}from"./dateFormating-CkDZtFMB.js";import"./index.tags-CXW0_EVK.js";import"./IconMapPin-BfSd31x9.js";import"./IconTrash-DVcP6PwM.js";import"./IconEdit-DF8qT9zS.js";import"./chunk-4FCEGNGT-x_O7RpcJ.js";import"./IconCalendar-Cc3-gxFV.js";import"./TagWithIcon-mGaDAwMD.js";/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Je=M("outline","air-balloon","IconAirBalloon",[["path",{d:"M10 19m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v1a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M12 16c3.314 0 6 -4.686 6 -8a6 6 0 1 0 -12 0c0 3.314 2.686 8 6 8z",key:"svg-1"}],["path",{d:"M12 9m-2 0a2 7 0 1 0 4 0a2 7 0 1 0 -4 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qe=M("outline","air-conditioning","IconAirConditioning",[["path",{d:"M8 16a3 3 0 0 1 -3 3",key:"svg-0"}],["path",{d:"M16 16a3 3 0 0 0 3 3",key:"svg-1"}],["path",{d:"M12 16v4",key:"svg-2"}],["path",{d:"M3 5m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v4a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-3"}],["path",{d:"M7 13v-3a1 1 0 0 1 1 -1h8a1 1 0 0 1 1 1v3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qe=M("outline","clipboard-off","IconClipboardOff",[["path",{d:"M5.575 5.597a2 2 0 0 0 -.575 1.403v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2m0 -4v-8a2 2 0 0 0 -2 -2h-2",key:"svg-0"}],["path",{d:"M9 5a2 2 0 0 1 2 -2h2a2 2 0 1 1 0 4h-2",key:"svg-1"}],["path",{d:"M3 3l18 18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xe=M("outline","database-off","IconDatabaseOff",[["path",{d:"M12.983 8.978c3.955 -.182 7.017 -1.446 7.017 -2.978c0 -1.657 -3.582 -3 -8 -3c-1.661 0 -3.204 .19 -4.483 .515m-2.783 1.228c-.471 .382 -.734 .808 -.734 1.257c0 1.22 1.944 2.271 4.734 2.74",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c.986 0 1.93 -.067 2.802 -.19m3.187 -.82c1.251 -.53 2.011 -1.228 2.011 -1.99v-6",key:"svg-1"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c3.217 0 5.991 -.712 7.261 -1.74m.739 -3.26v-4",key:"svg-2"}],["path",{d:"M3 3l18 18",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ze=M("outline","star","IconStar",[["path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z",key:"svg-0"}]]);function ea({indoor:a,outdoor:t}){var o,c;const n=[{key:"indoor",label:"Di dalam",data:(o=a==null?void 0:a.ispu)==null?void 0:o[0]},{key:"outdoor",label:"Di luar",data:(c=t==null?void 0:t.ispu)==null?void 0:c[0]}],i=[{label:"Rerata Partikulat (PM) 2.5",data:[{key:"indoor",label:"Di dalam",data:a==null?void 0:a.pm25},{key:"outdoor",label:"Di luar",data:t==null?void 0:t.pm25}]},{label:"Rerata Partikulat (PM) 10",data:[{key:"indoor",label:"Di dalam",data:a==null?void 0:a.pm100},{key:"outdoor",label:"Di luar",data:t==null?void 0:t.pm100}]}];return e.jsx(e.Fragment,{children:e.jsxs(h,{align:"stretch",gap:"4",children:[e.jsx(P,{title:"Rerata Indeks Standar Pencemar Udara (ISPU)",children:n.map(({label:s,data:r},u)=>e.jsxs(j,{flex:"1 1 0",children:[e.jsx(D,{variant:"outline",colorScheme:u?"green":"blue",mb:"2",children:s}),r?e.jsxs(h,{spacing:"3",children:[e.jsx(y,{rounded:"md",p:"2",bg:Ae(r==null?void 0:r.category).colorScheme+".300",minW:"40px",children:e.jsx(l,{fontSize:"xl",fontWeight:"700",children:r.ispu<=300?r.ispu:"300+"})}),e.jsxs(j,{children:[e.jsx(l,{fontWeight:"600",fontSize:"2xl",mt:"-1",children:r.category}),e.jsxs(l,{fontSize:"sm",color:"gray.600",children:["Polutan Utama : ",r.pollutant]})]})]}):e.jsx(R,{})]},u))}),i.map(({label:s,data:r},u)=>e.jsx(P,{title:s,children:r.map(({label:x,data:d},m)=>e.jsxs(j,{flex:"1 1 0",children:[e.jsx(D,{mb:"2",variant:"outline",colorScheme:m?"green":"blue",children:x}),d?e.jsxs(y,{alignContent:"baseline",rounded:"md",p:"2",bg:"gray.100",children:[e.jsx(l,{fontSize:"xl",fontWeight:"700",children:d.toFixed(2)}),e.jsx(l,{ml:"1",fontSize:"sm",children:Ce})]}):e.jsx(R,{})]},m))},u))]})})}function aa({indoor:a,outdoor:t}){const n=[{key:"ch4",label:"Emisi Gas Metana Rata-Rata",data:[{key:"indoor",label:"Di dalam",data:a==null?void 0:a.ch4},{key:"outdoor",label:"Di luar",data:t==null?void 0:t.ch4}],threshold:Me,max:ze,unit:"PPM"},{key:"co2",label:"Emisi Gas Karbonioksida Rata-Rata",data:[{key:"indoor",label:"Di dalam",data:a==null?void 0:a.co2},{key:"outdoor",label:"Di luar",data:t==null?void 0:t.co2}],threshold:De,max:Ie,unit:"PPM"}];return e.jsx(h,{align:"stretch",gap:"4",children:n.map(({label:i,data:o,unit:c,threshold:s,max:r,key:u})=>e.jsx(P,{title:i,children:o.map(({label:x,data:d},m)=>{const{colorScheme:p}=u=="co2"?Re(d==null?void 0:d.category):Pe(d==null?void 0:d.category);return e.jsxs(j,{flex:"1 1 0",children:[e.jsx(D,{variant:"outline",colorScheme:m?"green":"blue",mb:"2",children:x}),d?e.jsxs(h,{children:[e.jsxs(b,{spacing:"1",children:[e.jsxs(y,{alignContent:"baseline",rounded:"md",p:"2",bg:p+".200",children:[e.jsx(l,{fontSize:"2xl",fontWeight:"700",children:d.value.toFixed(2)}),e.jsx(l,{ml:"1",fontSize:"sm",children:c})]}),e.jsx(D,{w:"full",fontSize:"md",justifyContent:"center",colorScheme:p,children:d.category})]}),e.jsx(We,{style:{width:"125px"},arcsLength:s,colors:Te,percent:d.value>=r?1:d.value/r,arcPadding:.02,hideText:!0})]}):e.jsx(R,{})]},m)})}))})}function R(){return e.jsxs(h,{color:"gray.400",spacing:"1",align:"end",children:[e.jsx(l,{fontWeight:"600",size:"sm",textAlign:"center",children:"Data tidak lengkap"}),e.jsx(Oe,{label:"Rerata parameter udara tidak dapat dihitung karena data yang ada tidak mencukupi",children:e.jsx(g,{boxSize:"17px",as:ce})})]})}function ta({data:a,periode:t,dateRange:n}){const{eventLogs:i,count:{countStatus:o,countType:c,all:s},eventIdLongestEvent:r}=a,u=c.find(x=>x.type=="production");return e.jsx(v,{size:"sm",shadow:"xs",p:"1",children:e.jsx(k,{gap:"4",as:J,children:s?e.jsxs(e.Fragment,{children:[e.jsx(j,{flex:"1 1 0",minH:"350px",overflow:"hidden",children:e.jsx(na,{periode:t,data:a,dateRange:n})}),e.jsxs(b,{flex:"1 1 0",align:"stretch",children:[e.jsxs(B,{variant:"top-accent",bg:"blue.100",p:"3",roundedTop:"sm",roundedBottom:"md",fontSize:"md",justifyContent:"space-between",children:[e.jsxs(h,{align:"end",children:[e.jsx(y,{p:"2",rounded:"md",bg:"blue.200",boxSize:"50px",fontSize:"3xl",fontWeight:"700",children:s}),e.jsxs(j,{children:[e.jsx(l,{children:"Total"}),e.jsx(l,{fontWeight:"600",children:"Aktivitas di bulan ini"})]})]}),e.jsx(b,{align:"start",children:o.map((x,d)=>{const{icon:m,name:p}=de[x.status];return e.jsxs(h,{children:[e.jsx(y,{bg:"blue.200",p:"1",rounded:"md",children:e.jsx(g,{as:m,boxSize:"20px"})}),e.jsxs(l,{children:[x.count||"Tidak ada"," aktivitas"," ",p.toLowerCase()]})]},d)})})]}),e.jsx(l,{fontWeight:"600",children:"Kegiatan Produksi"}),e.jsxs(h,{px:"3",justify:"space-evenly",children:[e.jsx(h,{children:e.jsxs(y,{p:"3",rounded:"md",bg:"green.100",h:"50px",gap:"2",children:[e.jsx(y,{bg:"green.200",p:"2",rounded:"md",children:e.jsx(g,{as:xe,boxSize:"20px"})}),e.jsx(l,{fontSize:"3xl",fontWeight:"700",children:(u==null?void 0:u.count)||0}),e.jsx(l,{fontWeight:"600",children:"Aktivitas produksi"})]})}),e.jsx(h,{children:e.jsxs(y,{p:"3",rounded:"md",bg:"green.100",h:"50px",gap:"2",children:[e.jsx(y,{bg:"green.200",p:"2",rounded:"md",children:e.jsx(g,{as:re,boxSize:"20px"})}),e.jsx(l,{fontSize:"3xl",fontWeight:"700",children:(u==null?void 0:u.days)||0}),e.jsx(l,{fontWeight:"600",children:"Hari produksi"})]})})]}),e.jsx(l,{fontWeight:"600",children:"Jumlah Aktivitas berdasarkan jenis aktivitas"}),e.jsx(I,{justifyContent:"center",templateColumns:"repeat(auto-fit, minmax(160px, 120px))",gap:"2",children:c.filter(x=>x.count&&x.type!=="production").map(x=>{const{color:d,icon:m,name:p}=he[x.type];return e.jsxs(j,{p:"2",bg:d+".100",rounded:"md",children:[e.jsxs(h,{justify:"center",spacing:"1",children:[e.jsx(l,{fontSize:"2xl",fontWeight:"600",children:x.count}),e.jsx(g,{as:m,color:d+".500",boxSize:"23px"})]}),e.jsxs(l,{textAlign:"center",children:[x.days," Hari ",p.toLowerCase()]})]},x.type)})}),!!r&&e.jsxs(e.Fragment,{children:[e.jsx(l,{fontWeight:"600",children:"Aktivitas terlama"}),e.jsx(le,{event:i.find(x=>x.eventLogId==r)})]})]})]}):e.jsxs(h,{justify:"center",w:"full",py:"10",spacing:"3",color:"gray.500",children:[e.jsx(g,{as:Qe,boxSize:"45px"}),e.jsx(l,{fontSize:"xl",fontWeight:"500",children:"Tidak Ada Catatan Aktivitas"})]})})})}function na({dateRange:a,periode:t,data:n}){const[i,o]=a,c=S.useRef(),s=f(o).startOf(t).isSame(f().startOf(t));return e.jsxs(j,{h:"full",children:[e.jsx(Ue,{firstDay:0,ref:c,events:Ke(n.eventLogs),fixedWeekCount:!1,initialDate:o,plugins:[Ee],initialView:"dayGridYear",monthStartFormat:{month:"short",day:"numeric"},validRange:{start:a[0],end:s?f().toDate():a[1]},locale:He,headerToolbar:!1,eventContent:r=>Ge(r,!0)}),e.jsx("style",{children:`.fc-day.fc-day-disabled {
					border : 0px;
					padding : 0px
					max-height : 0px !important;
				}
				.fc-day.fc-day-disabled *{
					display : none;
					max-height : 0px !important;
					border : 0px
				}
				`})]})}function te(a){const{isOpen:t,onToggle:n}=pe();return e.jsxs(v,{size:"sm",p:"1",shadow:"xs",flexGrow:"1",children:[e.jsx(W,{as:T,fontWeight:"600",fontSize:"lg",onClick:n,variant:"ghost",py:"7",colorScheme:"white",justifyContent:"start",w:"full",leftIcon:e.jsx(y,{bg:"orange.200",p:"1.5",rounded:"lg",children:e.jsx(g,{as:Fe,boxSize:"22px",color:"orange.600"})}),rightIcon:e.jsx(g,{boxSize:"20px",as:t?Be:ue}),children:"Rekomendasi"}),e.jsxs($e,{in:t,animateOpacity:!0,children:[e.jsx(F,{}),e.jsx(k,{py:"2",children:a.children})]})]})}function sa({indoor:a,outdoor:t}){var i,o;const n=[{key:"indoor",label:"Untuk lingkup perusahaan",data:(i=a==null?void 0:a.ispu)==null?void 0:i[0].recomendation},{key:"outdoor",label:"Untuk kondisi diluar perusahaan",data:(o=t==null?void 0:t.ispu)==null?void 0:o[0].recomendation}];return n.filter(c=>c.data).length?e.jsx(te,{children:e.jsx(I,{templateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:8,children:n.filter(c=>c.data).map(({label:c,key:s,data:r})=>e.jsxs(j,{as:b,align:"start",children:[e.jsxs(h,{px:"3",py:"1.5",rounded:"md",border:"1px solid",borderColor:"blue.200",children:[e.jsx(g,{as:s=="indoor"?$:q,boxSize:"18px"}),e.jsx(l,{fontSize:"md",fontWeight:"600",children:c})]}),e.jsx(l,{textAlign:"justify",children:r==null?void 0:r.info}),e.jsxs(l,{textAlign:"justify",children:[e.jsxs(l,{as:"span",fontWeight:600,children:["Saran :"," "]}),s=="indoor"?r==null?void 0:r.company:r==null?void 0:r.public]})]},s))})}):null}function ia({indoor:a,outdoor:t}){const n=[{key:"co2",label:"Karbon dioksida"},{key:"ch4",label:"Metana"}].map(i=>{var o,c;return{...i,data:[{key:"indoor",label:"Untuk lingkup perusahaan",recomendation:(o=a==null?void 0:a[i.key])==null?void 0:o.recomendation},{key:"outdoor",label:"Untuk kondisi di luar perusahaan",recomendation:(c=t==null?void 0:t[i.key])==null?void 0:c.recomendation}]}}).filter(i=>i.data.filter(o=>o.recomendation).length);return n.length?e.jsx(te,{children:e.jsxs(Q,{variant:"soft-rounded",colorScheme:"gray",children:[e.jsx(ee,{as:h,children:n.map((i,o)=>e.jsx(ae,{rounded:"lg",py:"1",children:i.label},o))}),e.jsx(F,{my:"2",borderColor:"gray.300"}),e.jsx(X,{pb:"2",children:n.map(({key:i,data:o})=>e.jsx(Z,{px:"0",py:"1",as:b,align:"start",children:e.jsx(I,{templateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:6,children:o.filter(c=>c.recomendation).map(({label:c,recomendation:s},r)=>e.jsxs(j,{as:b,align:"start",children:[e.jsxs(h,{px:"3",py:"1.5",rounded:"md",border:"1px solid",borderColor:"blue.200",children:[e.jsx(g,{as:i=="indoor"?$:q,boxSize:"18px"}),e.jsx(l,{fontSize:"md",fontWeight:"600",children:c})]}),e.jsx(l,{fontSize:"md",textAlign:"justify",children:s==null?void 0:s.info}),e.jsxs(l,{fontSize:"md",textAlign:"justify",children:[e.jsxs("span",{style:{fontWeight:600},children:["Saran :"," "]}),i=="indoor"?s==null?void 0:s.company:s==null?void 0:s.public]})]},r))})},i))})]})}):null}function ra({data:a,company:t}){const[n,i]=S.useState(0),{average:o,countPerStar:c,count:s,reports:r}=a,u=K[Math.round(o)-1];return e.jsx(v,{size:"sm",shadow:"xs",p:"1",children:e.jsx(k,{children:s?e.jsxs(J,{gap:"4",children:[e.jsxs(b,{flex:"1 1 0",align:"stretch",children:[e.jsxs(B,{colorScheme:u.color.slice(0,-4),fontSize:"md",p:"3",variant:"top-accent",as:b,children:[e.jsxs(h,{fontWeight:"600",fontSize:"md",alignSelf:"start",children:[e.jsx(g,{as:Ze,boxSize:"16px"}),e.jsx(l,{children:"Rating Aduan Rata Rata"})]}),e.jsxs(h,{pt:"2",alignSelf:"center",children:[e.jsx(g,{as:u.icon,color:u.color,boxSize:"50px"}),e.jsxs(h,{align:"baseline",spacing:"1",children:[e.jsx(l,{fontWeight:"700",fontSize:"3xl",children:o.toFixed(2)}),e.jsx(l,{children:"/5.00"})]})]}),e.jsxs(l,{children:["Total Aduan : ",s," Aduan"]})]}),e.jsx(l,{fontWeight:"600",children:"Jumlah aduan berdasarkan bintang"}),e.jsx(I,{w:"full",gap:"2",templateColumns:"repeat(auto-fit, minmax(100px, 1fr))",children:c.map((x,d)=>({ratingIcon:K[4-d],rating:5-d,count:x})).map(({ratingIcon:x,count:d,rating:m})=>e.jsxs(b,{p:"2",spacing:"1",rounded:"md",bg:x.color.slice(0,-4)+".100",cursor:"pointer",_active:{bg:x.color.slice(0,-4)+".200"},onClick:()=>i(m),children:[e.jsxs(h,{children:[e.jsx(l,{fontSize:"xl",fontWeight:"600",w:"1ex",children:d}),e.jsx(g,{as:x.icon,boxSize:"30px",color:x.color})]}),e.jsxs(l,{children:["Bintang ",m]})]},m))}),e.jsxs(h,{justify:"space-between",children:[e.jsx(l,{fontWeight:"600",children:"Filter aduan di peta"}),e.jsx(N,{value:n.toString(),onChange:x=>i(parseInt(x.target.value)),w:"140px",cursor:"pointer",children:Array.from({length:6},(x,d)=>e.jsx("option",{value:d,children:d?"Rating "+d:"Semua Rating"},d))})]})]}),e.jsx(Ne,{flex:"2 1 0",marker:Ve.RatingMarker,scrollWheelZoom:!1,companiesData:[t],data:r.filter(x=>n?x.rating==n:!0)})]}):e.jsxs(h,{justify:"center",py:"10",spacing:"3",color:"gray.500",children:[e.jsx(g,{as:V,boxSize:"45px"}),e.jsx(l,{fontSize:"xl",fontWeight:"500",children:"Tidak Ada Aduan"})]})})})}function la({state:a,type:t,format:n}){const[i,o]=a,c=s=>o(f(i).add(s,t).format(n));return e.jsxs(h,{spacing:"1",justify:"space-between",children:[e.jsx(U,{bg:"white",variant:"outline",icon:e.jsx(me,{}),"aria-label":"previous",onClick:()=>c(-1)}),e.jsx(_e,{fontWeight:"600",variant:"outline",onFocus:s=>s.target.showPicker(),type:t,bg:"white",w:"fit-content",textAlign:"center",max:f().format(n),onChange:s=>o(s.target.value),value:i}),e.jsx(U,{variant:"outline",icon:e.jsx(ge,{}),"aria-label":"next",bg:"white",isDisabled:f(i).isSameOrAfter(f().startOf(t)),onClick:()=>c(1)}),e.jsx(T,{variant:"outline",bg:"white",onClick:()=>o(f().format(n)),children:t=="month"?"Bulan Ini":"Minggu Ini"})]})}function oa(a){const{state:t,getInputProps:n,getRadioProps:i}=fe(a),o=S.useRef(),c=n(),s=i();return e.jsxs(j,{as:"label",children:[e.jsx("input",{...c}),e.jsx(j,{...s,ref:o,display:"none"}),e.jsx(T,{onClick:()=>{var r;return(r=o.current)==null?void 0:r.click()},border:"1px solid",borderColor:"teal.500",size:"sm",variant:t.isChecked?"solid":"outline",colorScheme:"teal",children:a.children})]})}function ca({options:a,...t}){const{getRootProps:n,getRadioProps:i}=je({...t}),o=n();return e.jsx(h,{...o,children:a.map(c=>{const s=i({value:c});return e.jsx(oa,{...s,children:c},c)})})}const C="Di dalam perusahaan",w="Di sekitar perusahaan",A="Keduanya";function E({title:a,tren:t,paramList:n}){const[i,o]=S.useState([C,w]),c=i.map(s=>s==C?"indoor":"outdoor");return e.jsxs(v,{size:"sm",shadow:"xs",p:"1",children:[e.jsx(W,{fontWeight:"600",fontSize:"lg",children:a}),t.length?e.jsx(e.Fragment,{children:e.jsx(k,{pt:"0",children:e.jsxs(Q,{isLazy:!0,variant:"unstyled",colorScheme:"teal",size:"sm",children:[e.jsxs(ee,{gap:"2",children:[n.map((s,r)=>e.jsx(ae,{rounded:"md",as:T,size:"sm",colorScheme:"teal",border:"1px solid",borderColor:"teal.500",_selected:{bg:"teal.500",color:"white",_hover:{bg:"teal.600"}},variant:"outline",children:s.name},r)),e.jsx(ye,{}),e.jsx(ca,{options:[C,w,A],value:i.length==2?A:i[0],onChange:s=>{o(([r])=>s==A?[r,r==C?w:C]:[s])}})]}),e.jsx(F,{mt:"4"}),e.jsx(X,{children:n.map((s,r)=>e.jsx(Z,{h:"440px",children:s.type=="bar"?e.jsx(Le,{data:t||[],tooltipLabel:s.name,tickFormat:"DD MMM YYYY",offsetDomain:"day",dataKeyTypeAndFunc:c.map(u=>s.dataKeyTypeAndFunc(u))}):e.jsx(we,{data:t||[],tickFormat:"DD MMM YYYY",gasType:s.name,dataKeyTypeAndFunc:c.map(u=>s.dataKeyTypeAndFunc(u))})},r))})]})})}):e.jsx(y,{w:"full",pt:"5",pb:"8",children:e.jsx(l,{fontWeight:"600",color:"gray.500",fontSize:"xl",children:"Tidak Ada Data"})})]})}const da=[{type:"bar",name:"ISPU",dataKeyTypeAndFunc:a=>({func:t=>{var n,i;return(i=(n=t[a])==null?void 0:n.ispu)==null?void 0:i[0]},envType:a})},{type:"bar",name:"ISPU PM2.5",dataKeyTypeAndFunc:a=>({func:t=>{var n,i;return(i=(n=t[a])==null?void 0:n.ispu)==null?void 0:i.find(o=>o.pollutant=="PM25")},envType:a})},{type:"bar",name:"ISPU PM10",dataKeyTypeAndFunc:a=>({func:t=>{var n,i;return(i=(n=t[a])==null?void 0:n.ispu)==null?void 0:i.find(o=>o.pollutant=="PM100")},envType:a})},{type:"line",name:"PM2.5",dataKeyTypeAndFunc:a=>({func:t=>{var n;return{value:(n=t[a])==null?void 0:n.pm25}},envType:a})},{type:"line",name:"PM10",dataKeyTypeAndFunc:a=>({func:t=>{var n;return{value:(n=t[a])==null?void 0:n.pm100}},envType:a})}],xa=[{type:"line",name:"CH4",dataKeyTypeAndFunc:a=>({func:t=>{var n;return(n=t[a])==null?void 0:n.ch4},envType:a})},{type:"line",name:"CO2",dataKeyTypeAndFunc:a=>({func:t=>{var n;return(n=t[a])==null?void 0:n.co2},envType:a})}],H={month:{inputFormat:"YYYY-MM",format:"MMMM YYYY",label:"bulan"},week:{inputFormat:"YYYY-[W]ww",format:"[ke-]ww YYYY",label:"minggu"}};function Oa(){var L,Y;const[a,t]=S.useState("month"),{inputFormat:n,format:i,label:o}=H[a],[c,s]=S.useState(f().format(n)),{user:r}=be(),[u,x]=S.useState(""),d=(Y=(L=r.view)==null?void 0:L.company)==null?void 0:Y.companyId,m=d?`/companies/${d}/summary?type=${a}&periode=${c}`:null,{data:p}=Se(m,ve);if(!d)return e.jsx(oe,{selectCompanyOnly:!0});S.useEffect(()=>{x(m)},[m]);const ne=se=>{const O=se.target.value;t(O),s(f().format(H[O].inputFormat))};return e.jsxs(j,{children:[e.jsxs(h,{align:"start",justify:"space-between",children:[e.jsxs(j,{children:[e.jsxs(_,{size:"lg",children:["Laporan ",o," ",f(c).format(i)]}),e.jsx(l,{children:p?`${f(p.meta.startDate).format("DD MMMM YYYY")} s/d ${f(p.meta.endDate).format("DD MMMM YYYY")}`:"Mengambil Data ..."})]}),e.jsxs(h,{spacing:"4",children:[e.jsxs(j,{children:[e.jsxs(l,{mb:"1",fontSize:"sm",children:["Navigasi ke ",o.toLowerCase()," lain"]}),e.jsx(la,{state:[c,s],type:a,format:n})]}),e.jsxs(j,{children:[e.jsx(l,{mb:"1",fontSize:"sm",children:"Pilih Jenis Laporan"}),e.jsxs(N,{w:"fit-content",bg:"white",fontWeight:"600",value:a,onChange:ne,children:[e.jsx("option",{value:"month",children:"Laporan Bulanan"}),e.jsx("option",{value:"week",children:"Laporan Mingguan"})]})]})]})]}),p&&u==m?e.jsxs(b,{align:"stretch",spacing:"4",mt:"4",children:[e.jsx(z,{title:"Kualitas Udara (ISPU)",colorScheme:"telegram",icon:Je}),p.tren.length>0?e.jsxs(e.Fragment,{children:[e.jsx(ea,{indoor:p.averageData.indoor,outdoor:p.averageData.outdoor}),e.jsx(sa,{indoor:p.averageData.indoor,outdoor:p.averageData.outdoor}),e.jsx(E,{title:"Tren Kualitas Udara",tren:p.tren,paramList:da})]}):e.jsx(G,{children:"Data Tidak Tersedia"}),e.jsx(z,{title:"Emisi Gas Rumah Kaca (CO2 dan CH4)",colorScheme:"teal",icon:qe}),p.tren.length>0?e.jsxs(e.Fragment,{children:[e.jsx(aa,{indoor:p.averageData.indoor,outdoor:p.averageData.outdoor}),e.jsx(ia,{indoor:p.averageData.indoor,outdoor:p.averageData.outdoor}),e.jsx(E,{title:"Tren Emisi Gas Rumah Kaca",tren:p.tren,paramList:xa})]}):e.jsx(G,{children:"Data Tidak Tersedia"}),e.jsx(z,{title:"Aduan Di Sekitar",colorScheme:"orange",icon:V}),e.jsx(ra,{data:p.reports,company:p.meta.company}),e.jsx(z,{title:"Catatan Kegiatan Perusahaan",colorScheme:"purple",icon:ke}),e.jsx(ta,{periode:a,data:p.eventLogs,dateRange:[p.meta.startDate,p.meta.endDate]})]}):e.jsxs(h,{mx:"auto",py:"20",spacing:"5",justify:"center",children:[e.jsx(ie,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"blue.500",boxSize:"50px"}),e.jsx(l,{fontSize:"xl",color:"gray.500",fontWeight:"600",children:"Mengambil Data"})]})]})}function z({title:a,icon:t,colorScheme:n}){return e.jsxs(h,{bg:`${n}.100`,p:"2",spacing:"0",rounded:"md",w:"fit-content",shadow:"sm",children:[e.jsx(y,{p:"1",rounded:"md",bg:`${n}.50`,color:`${n}.500`,children:e.jsx(g,{as:t,boxSize:"24px"})}),e.jsx(_,{size:"md",mx:"3",fontWeight:"600",children:a})]})}function P({title:a,...t}){return e.jsxs(v,{size:"sm",p:"1",shadow:"xs",flexGrow:"1",children:[a&&e.jsx(W,{fontWeight:"600",fontSize:"lg",children:a}),e.jsx(k,{pt:"0",as:h,divider:e.jsx(Ye,{}),children:t.children})]})}function G({icon:a,...t}){return e.jsx(v,{size:"sm",p:"1",shadow:"xs",flexGrow:"1",children:e.jsxs(k,{as:h,justify:"center",py:"10",spacing:"3",color:"gray.500",children:[e.jsx(g,{as:Xe,boxSize:"45px"}),e.jsx(l,{fontSize:"xl",fontWeight:"500",children:t.children})]})})}export{P as CardSection,G as NoData,Oa as default};
