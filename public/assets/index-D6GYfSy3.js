import{N as D,j as e,a0 as g,U as h,G as y,Y as c,V as b,S as k,X as C,ab as V,I as j,r as S,T as O,W as J,Z as oe}from"./font-Qhbu9OiB.js";import{I as ce,C as de,S as xe}from"./CardEventLog-DIGb_3Ll.js";import{F as v,T as z,ad as pe,u as U,ae as he,x as ue,a4 as me,q as X,l as f,d as ge,af as je,ag as fe,K as ye,a as q,E as Z,I as be,n as Se,ah as ve,ai as ke,b as Ce,f as we,aj as Me,L as Ie}from"./app-OFdP0MLv.js";import{g as ze,b as De,d as Te,r as w}from"./common.utils-KfV-hsLd.js";import{U as Ae,a as Re,b as Pe,T as We,M as Fe,G as Le,c as Ye}from"./MyLineChart-C0m-AWlP.js";import{d as Oe,I as Ue,B as Q,M as Ke,S as Ge}from"./ISPUChart-DbFbx45Q.js";import{T as Ee,F as He,e as Be,i as _e,l as $e,r as Ne}from"./EventCalendar-COlJFkPD.js";import{G as A}from"./chunk-JARCRF6W-DEbpRF_0.js";import{I as Ve}from"./IconChevronUp-BQpdl01g.js";import{I as F,B as R,c as Je}from"./logo-white-Cvs5dC_u.js";import{C as Xe}from"./chunk-RKXMPHPI-bDE1FB-r.js";import{D as K}from"./logo-C54eNvEo.js";import{I as qe}from"./IconTrees-B9X5JGb9.js";import{T as ee,a as ae,b as ne}from"./chunk-4YMKQ5D4-BNLh7UBr.js";import{T as te,a as se}from"./chunk-IAXSQ4X2-BJSR8lPV.js";import{M as Ze,a as Qe}from"./index-ClY7xd3L.js";import{R as B}from"./ReportCard-B50QPRFe.js";import"./dateFormating-k4McqWkx.js";import"./IconMapPin-D5WQIwnP.js";import"./IconTrash-DhW0IJVI.js";import"./IconEdit-NNTSMBKd.js";import"./chunk-4FCEGNGT-CjW0cQ47.js";import"./IconCalendar-Cb4TI5xO.js";import"./index-C8pFKqZA.js";import"./TagWithIcon-CCVojo9e.js";/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ea=D("outline","air-balloon","IconAirBalloon",[["path",{d:"M10 19m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v1a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M12 16c3.314 0 6 -4.686 6 -8a6 6 0 1 0 -12 0c0 3.314 2.686 8 6 8z",key:"svg-1"}],["path",{d:"M12 9m-2 0a2 7 0 1 0 4 0a2 7 0 1 0 -4 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var aa=D("outline","air-conditioning","IconAirConditioning",[["path",{d:"M8 16a3 3 0 0 1 -3 3",key:"svg-0"}],["path",{d:"M16 16a3 3 0 0 0 3 3",key:"svg-1"}],["path",{d:"M12 16v4",key:"svg-2"}],["path",{d:"M3 5m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v4a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-3"}],["path",{d:"M7 13v-3a1 1 0 0 1 1 -1h8a1 1 0 0 1 1 1v3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var na=D("outline","clipboard-off","IconClipboardOff",[["path",{d:"M5.575 5.597a2 2 0 0 0 -.575 1.403v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2m0 -4v-8a2 2 0 0 0 -2 -2h-2",key:"svg-0"}],["path",{d:"M9 5a2 2 0 0 1 2 -2h2a2 2 0 1 1 0 4h-2",key:"svg-1"}],["path",{d:"M3 3l18 18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ta=D("outline","database-off","IconDatabaseOff",[["path",{d:"M12.983 8.978c3.955 -.182 7.017 -1.446 7.017 -2.978c0 -1.657 -3.582 -3 -8 -3c-1.661 0 -3.204 .19 -4.483 .515m-2.783 1.228c-.471 .382 -.734 .808 -.734 1.257c0 1.22 1.944 2.271 4.734 2.74",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c.986 0 1.93 -.067 2.802 -.19m3.187 -.82c1.251 -.53 2.011 -1.228 2.011 -1.99v-6",key:"svg-1"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c3.217 0 5.991 -.712 7.261 -1.74m.739 -3.26v-4",key:"svg-2"}],["path",{d:"M3 3l18 18",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sa=D("outline","star","IconStar",[["path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z",key:"svg-0"}]]);function ia({indoor:a,outdoor:n}){var l,o;const t=[{key:"indoor",label:"Di dalam",data:(l=a==null?void 0:a.ispu)==null?void 0:l[0]},{key:"outdoor",label:"Di luar",data:(o=n==null?void 0:n.ispu)==null?void 0:o[0]}],i=[{label:"Rerata Partikulat (PM) 2.5",data:[{key:"indoor",label:"Di dalam",data:a==null?void 0:a.pm25},{key:"outdoor",label:"Di luar",data:n==null?void 0:n.pm25}]},{label:"Rerata Partikulat (PM) 10",data:[{key:"indoor",label:"Di dalam",data:a==null?void 0:a.pm100},{key:"outdoor",label:"Di luar",data:n==null?void 0:n.pm100}]}];return e.jsx(e.Fragment,{children:e.jsxs(v,{flexWrap:"wrap",align:"stretch",gap:"4",children:[e.jsx(Y,{flexGrow:"1",title:"Rerata Indeks Standar Pencemar Udara (ISPU)",children:t.map(({label:r,data:d},u)=>e.jsxs(g,{flex:"1 1 0",children:[e.jsx(z,{variant:"outline",colorScheme:u?"green":"blue",mb:"2",children:r}),d?e.jsxs(h,{spacing:"3",children:[e.jsx(y,{rounded:"md",p:"2",bg:ze(d==null?void 0:d.category).colorScheme+".300",minW:"40px",children:e.jsx(c,{fontSize:"xl",fontWeight:"600",children:d.ispu<=300?d.ispu:"300+"})}),e.jsxs(g,{children:[e.jsx(c,{fontWeight:"600",fontSize:"2xl",mt:"-1",children:d.category}),e.jsxs(c,{fontSize:"sm",color:"gray.600",children:["Polutan Utama : ",d.pollutant]})]})]}):e.jsx(L,{})]},u))}),e.jsx(v,{flexGrow:"1",flexWrap:"wrap",align:"stretch",gap:"4",children:i.map(({label:r,data:d},u)=>e.jsx(Y,{title:r,children:d.map(({label:m,data:s},p)=>e.jsxs(g,{flex:"1 1 0",children:[e.jsx(z,{mb:"2",variant:"outline",colorScheme:p?"green":"blue",children:m}),s?e.jsxs(y,{alignContent:"baseline",rounded:"md",p:"2",bg:"gray.100",children:[e.jsx(c,{fontSize:"xl",fontWeight:"600",children:s.toFixed(2)}),e.jsx(c,{ml:"1",fontSize:"sm",children:Ae})]}):e.jsx(L,{})]},p))},u))})]})})}function ra({indoor:a,outdoor:n}){const t=[{key:"ch4",label:"Emisi Gas Metana Rata-Rata",data:[{key:"indoor",label:"Di dalam",data:a==null?void 0:a.ch4},{key:"outdoor",label:"Di luar",data:n==null?void 0:n.ch4}],threshold:Re,max:Pe,unit:"PPM"},{key:"co2",label:"Emisi Gas Karbonioksida Rata-Rata",data:[{key:"indoor",label:"Di dalam",data:a==null?void 0:a.co2},{key:"outdoor",label:"Di luar",data:n==null?void 0:n.co2}],threshold:We,max:Fe,unit:"PPM"}];return e.jsx(v,{align:"stretch",flexDir:{base:"column",lg:"row"},gap:"4",children:t.map(({label:i,data:l,unit:o,threshold:r,max:d,key:u})=>e.jsx(Y,{title:i,children:l.map(({label:m,data:s},p)=>{const{colorScheme:x}=u=="co2"?De(s==null?void 0:s.category):Te(s==null?void 0:s.category);return e.jsxs(g,{flex:"1 1 0",children:[e.jsx(z,{variant:"outline",colorScheme:p?"green":"blue",mb:"2",children:m}),s?e.jsxs(h,{justify:"center",wrap:"wrap-reverse",children:[e.jsxs(b,{spacing:"1",align:"stretch",children:[e.jsxs(y,{alignContent:"baseline",rounded:"md",p:"2",bg:x+".200",children:[e.jsx(c,{fontSize:"xl",fontWeight:"700",children:s.value.toFixed(2)}),e.jsx(c,{ml:"1",fontSize:"sm",children:o})]}),e.jsx(z,{w:"full",fontSize:"md",justifyContent:"center",colorScheme:x,children:s.category})]}),e.jsx(Oe,{style:{width:"120px"},arcsLength:r,colors:Le,percent:s.value>=d?1:s.value/d,arcPadding:.02,hideText:!0})]}):e.jsx(L,{})]},p)})},u))})}function L(){return e.jsxs(h,{py:"8px",justify:"center",align:"center",color:"gray.400",spacing:"1",children:[e.jsx(c,{fontWeight:"600",w:"max-content",size:"sm",textAlign:"center",children:"Data tidak lengkap"}),e.jsx(Ee,{label:"Rerata parameter udara tidak dapat dihitung karena data yang ada tidak mencukupi",children:e.jsx(F,{"aria-label":"info",size:"xs",variant:"transparant",icon:e.jsx(pe,{size:"18"})})})]})}function la({data:a,periode:n,dateRange:t}){const{screenType:i}=U(),{eventLogs:l,count:{countStatus:o,countType:r,all:d},eventIdLongestEvent:u}=a,m=r.find(s=>s.type=="production");return e.jsx(k,{size:w,shadow:"xs",children:e.jsx(C,{children:d?e.jsxs(v,{direction:i=="desktop"?"row-reverse":"column",gap:"4",children:[e.jsxs(b,{flex:"1 0 0",align:"stretch",children:[e.jsxs(V,{variant:"top-accent",bg:"blue.100",p:"3",roundedTop:"sm",roundedBottom:"md",fontSize:"md",justifyContent:"space-between",flexWrap:"wrap",gap:"6",children:[e.jsxs(h,{align:"end",children:[e.jsx(y,{p:"2",rounded:"md",bg:"blue.200",boxSize:"50px",fontSize:"3xl",fontWeight:"600",children:d}),e.jsxs(g,{children:[e.jsx(c,{children:"Total"}),e.jsx(c,{fontWeight:"600",children:"Aktivitas di bulan ini"})]})]}),e.jsx(b,{align:"start",children:o.map((s,p)=>{const{icon:x,name:M}=he[s.status];return e.jsxs(h,{children:[e.jsx(y,{bg:"blue.200",p:"1",rounded:"md",children:e.jsx(j,{as:x,boxSize:"20px"})}),e.jsxs(c,{children:[s.count||"Tidak ada"," aktivitas"," ",M.toLowerCase()]})]},p)})})]}),e.jsx(c,{fontWeight:"600",children:"Kegiatan Produksi"}),e.jsxs(h,{px:"3",justify:"space-evenly",wrap:"wrap",children:[e.jsx(h,{children:e.jsxs(y,{p:"3",rounded:"md",bg:"green.100",h:"50px",gap:"2",children:[e.jsx(y,{bg:"green.200",p:"2",rounded:"md",children:e.jsx(j,{as:ue,boxSize:"20px"})}),e.jsx(c,{fontSize:"3xl",fontWeight:"600",children:(m==null?void 0:m.count)||0}),e.jsx(c,{fontWeight:"600",children:"Aktivitas produksi"})]})}),e.jsx(h,{children:e.jsxs(y,{p:"3",rounded:"md",bg:"green.100",h:"50px",gap:"2",children:[e.jsx(y,{bg:"green.200",p:"2",rounded:"md",children:e.jsx(j,{as:ce,boxSize:"20px"})}),e.jsx(c,{fontSize:"3xl",fontWeight:"600",children:(m==null?void 0:m.days)||0}),e.jsx(c,{fontWeight:"600",children:"Hari produksi"})]})})]}),r.filter(s=>s.count&&s.type!=="production").length>0&&e.jsxs(e.Fragment,{children:[e.jsx(c,{fontWeight:"600",children:"Jumlah Aktivitas berdasarkan jenis aktivitas"}),e.jsx(A,{justifyContent:"center",templateColumns:"repeat(auto-fit, minmax(160px, 120px))",gap:"2",children:r.filter(s=>s.count&&s.type!=="production").map(s=>{const{color:p,icon:x,name:M}=me[s.type];return e.jsxs(g,{p:"2",bg:p+".100",rounded:"md",children:[e.jsxs(h,{justify:"center",spacing:"1",children:[e.jsx(c,{fontSize:"2xl",fontWeight:"600",children:s.count}),e.jsx(j,{as:x,color:p+".500",boxSize:"23px"})]}),e.jsxs(c,{textAlign:"center",children:[s.days," Hari ",M.toLowerCase()]})]},s.type)})})]}),e.jsx(X,{}),!!u&&e.jsxs(e.Fragment,{children:[e.jsx(c,{fontWeight:"600",children:"Aktivitas terlama"}),e.jsx(de,{event:l.find(s=>s.eventLogId==u)})]})]}),i!=="desktop"&&e.jsx(c,{fontWeight:"600",children:"Kegiatan Dalam Kalender"}),e.jsx(g,{rounded:"lg",flex:"1 0 0",h:"auto",minH:"400px",overflow:"hidden",children:e.jsx(oa,{periode:n,data:a,dateRange:t})})]}):e.jsxs(h,{justify:"center",w:"full",py:"10",spacing:"3",color:"gray.500",children:[e.jsx(j,{as:na,boxSize:"45px"}),e.jsx(c,{fontSize:"xl",fontWeight:"500",children:"Tidak Ada Catatan Aktivitas"})]})})})}function oa({dateRange:a,periode:n,data:t}){const[i,l]=a,o=S.useRef(),r=f(l).startOf(n).isSame(f().startOf(n));return e.jsxs(e.Fragment,{children:[e.jsx(He,{firstDay:0,ref:o,events:Be(t.eventLogs),fixedWeekCount:!1,initialDate:l,plugins:[_e],initialView:"dayGridYear",height:"100%",monthStartFormat:{month:"short",day:"numeric"},validRange:{start:a[0],end:r?f().toDate():a[1]},locale:$e,headerToolbar:!1,eventContent:d=>Ne(d,!0)}),e.jsx("style",{children:`.fc-day.fc-day-disabled {
					border : 0px;
					padding : 0px
					max-height : 0px !important;
				}
				.fc-day.fc-day-disabled *{
					display : none;
					max-height : 0px !important;
					border : 0px
				}
				`})]})}function ie(a){const{isOpen:n,onToggle:t}=ge();return e.jsxs(k,{size:w,shadow:"xs",flexGrow:"1",children:[e.jsx(O,{as:R,onClick:t,variant:"ghost",py:"8",colorScheme:"white",justifyContent:"start",alignItems:"center",w:"full",size:"lg",iconSpacing:"12px",leftIcon:e.jsx(y,{bg:"orange.200",p:"1.5",rounded:"lg",children:e.jsx(j,{as:Ue,boxSize:"20px",color:"orange.600"})}),rightIcon:e.jsx(j,{boxSize:"20px",as:n?Ve:je}),children:"Rekomendasi"}),e.jsxs(Xe,{in:n,animateOpacity:!0,children:[e.jsx(K,{}),e.jsx(C,{pt:"4",children:a.children})]})]})}function ca({indoor:a,outdoor:n}){var i,l;const t=[{key:"indoor",label:"Untuk lingkup perusahaan",data:(i=a==null?void 0:a.ispu)==null?void 0:i[0].recomendation},{key:"outdoor",label:"Untuk kondisi diluar perusahaan",data:(l=n==null?void 0:n.ispu)==null?void 0:l[0].recomendation}];return t.filter(o=>o.data).length?e.jsx(ie,{children:e.jsx(A,{templateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:8,children:t.filter(o=>o.data).map(({label:o,key:r,data:d})=>e.jsx(re,{type:r,label:o,recomendation:d},r))})}):null}function da({indoor:a,outdoor:n}){const t=[{key:"co2",label:"Karbon dioksida"},{key:"ch4",label:"Metana"}].map(i=>{var l,o;return{...i,data:[{key:"indoor",label:"Untuk lingkup perusahaan",recomendation:(l=a==null?void 0:a[i.key])==null?void 0:l.recomendation},{key:"outdoor",label:"Untuk kondisi di luar perusahaan",recomendation:(o=n==null?void 0:n[i.key])==null?void 0:o.recomendation}]}}).filter(i=>i.data.filter(l=>l.recomendation).length);return t.length?e.jsx(ie,{children:e.jsxs(ee,{variant:"soft-rounded",colorScheme:"gray",children:[e.jsx(te,{as:h,children:t.map((i,l)=>e.jsx(se,{rounded:"lg",py:"1",children:i.label},l))}),e.jsx(K,{my:"3",borderColor:"gray.200"}),e.jsx(ae,{pb:"2",children:t.map(({key:i,data:l})=>e.jsx(ne,{px:"0",py:"1",as:b,align:"start",children:e.jsx(A,{templateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:6,children:l.filter(o=>o.recomendation).map(({label:o,recomendation:r,key:d})=>e.jsx(re,{type:d,label:o,recomendation:r},d))})},i))})]})}):null}function re({type:a,label:n,recomendation:t}){return e.jsxs(g,{as:b,align:"start",children:[e.jsxs(z,{colorScheme:a=="indoor"?"blue":"green",size:"lg",p:"3",alignItems:"center",children:[e.jsx(fe,{boxSize:"18px",as:a=="indoor"?ye:qe}),n]}),e.jsxs(g,{mt:"1",children:[e.jsx(c,{textAlign:"justify",children:t==null?void 0:t.info}),e.jsxs(c,{textAlign:"justify",mt:"1",children:[e.jsxs(c,{as:"span",fontWeight:600,children:["Saran :"," "]}),a=="indoor"?t==null?void 0:t.company:t==null?void 0:t.public]})]})]})}function xa({data:a,company:n}){const{screenType:t}=U(),[i,l]=S.useState(0),{average:o,countPerStar:r,count:d,reports:u}=a,m=B[Math.round(o)-1];return e.jsx(k,{size:w,shadow:"xs",children:e.jsx(C,{children:d?e.jsxs(v,{gap:"4",direction:t=="desktop"?"row":"column",children:[e.jsxs(b,{flex:"1 1 0",align:"stretch",children:[e.jsxs(V,{colorScheme:m.color.slice(0,-4),fontSize:"md",p:"3",variant:"top-accent",as:b,children:[e.jsxs(h,{fontWeight:"600",fontSize:"md",alignSelf:"start",children:[e.jsx(j,{as:sa,boxSize:"16px"}),e.jsx(c,{children:"Rating Aduan Rata Rata"})]}),e.jsxs(h,{pt:"2",alignSelf:"center",children:[e.jsx(j,{as:m.icon,color:m.color,boxSize:"50px"}),e.jsxs(h,{align:"baseline",spacing:"1",children:[e.jsx(c,{fontWeight:"600",fontSize:"3xl",children:o.toFixed(2)}),e.jsx(c,{children:"/5.00"})]})]}),e.jsxs(c,{children:["Total Aduan : ",d," Aduan"]})]}),e.jsx(c,{fontWeight:"600",children:"Jumlah aduan berdasarkan bintang"}),e.jsx(A,{w:"full",gap:"2",templateColumns:"repeat(auto-fit, minmax(100px, 1fr))",children:r.map((s,p)=>({ratingIcon:B[4-p],rating:5-p,count:s})).map(({ratingIcon:s,count:p,rating:x})=>e.jsxs(b,{p:"2",spacing:"1",rounded:"md",bg:s.color.slice(0,-4)+".100",cursor:"pointer",_active:{bg:s.color.slice(0,-4)+".200"},onClick:()=>l(x),children:[e.jsxs(h,{children:[e.jsx(c,{fontSize:"xl",fontWeight:"600",w:"1ex",children:p}),e.jsx(j,{as:s.icon,boxSize:"30px",color:s.color})]}),e.jsxs(c,{children:["Bintang ",x]})]},x))}),e.jsxs(h,{justify:"space-between",mt:"3",children:[e.jsx(c,{fontWeight:"600",children:"Filter aduan di peta"}),e.jsx(q,{value:i.toString(),onChange:s=>l(parseInt(s.target.value)),w:"140px",cursor:"pointer",children:Array.from({length:6},(s,p)=>e.jsx("option",{value:p,children:p?"Rating "+p:"Semua Rating"},p))})]})]}),e.jsx(Ze,{flex:"2 1 0",minH:"300px",marker:Qe.RatingMarker,scrollWheelZoom:!1,companiesData:[n],data:u.filter(s=>i?s.rating==i:!0)})]}):e.jsxs(h,{justify:"center",py:"10",spacing:"3",color:"gray.500",children:[e.jsx(j,{as:Z,boxSize:"45px"}),e.jsx(c,{fontSize:"xl",fontWeight:"500",children:"Tidak Ada Aduan"})]})})})}function pa({state:a,type:n,format:t}){const[i,l]=a,o=r=>l(f(i).add(r,n).format(t));return e.jsxs(h,{spacing:"1",justify:"space-between",children:[e.jsx(F,{bg:"white",variant:"outline",icon:e.jsx(be,{}),"aria-label":"previous",onClick:()=>o(-1)}),e.jsx(Je,{fontWeight:"600",variant:"outline",onFocus:r=>r.target.showPicker(),type:n,bg:"white",w:"fit-content",textAlign:"center",max:f().format(t),onChange:r=>l(r.target.value),value:i}),e.jsx(F,{variant:"outline",icon:e.jsx(Se,{}),"aria-label":"next",bg:"white",isDisabled:f(i).isSameOrAfter(f().startOf(n)),onClick:()=>o(1)}),e.jsx(R,{variant:"outline",bg:"white",onClick:()=>l(f().format(t)),children:n=="month"?"Bulan Ini":"Minggu Ini"})]})}function ha(a){const{state:n,getInputProps:t,getRadioProps:i}=ke(a),l=S.useRef(),o=t(),r=i();return e.jsxs(R,{onClick:()=>{var d;return(d=l.current)==null?void 0:d.click()},as:"label",borderColor:"teal.400",variant:n.isChecked?"solid":"outline",children:[e.jsx("input",{...o}),e.jsx(g,{...r,ref:l,display:"none"}),a.children]})}function ua({options:a,...n}){const{getRootProps:t,getRadioProps:i}=ve({...n}),l=t();return e.jsx(Q,{size:"sm",isAttached:!0,rowGap:"2",flexWrap:"wrap",colorScheme:"teal",variant:"outline",...l,children:a.map(o=>{const r=i({value:o});return e.jsx(ha,{...r,children:o},o)})})}const I="Dalam perusahaan",P="Sekitar perusahaan",W="Keduanya";function _({title:a,tren:n,paramList:t}){const[i,l]=S.useState([I,P]),o=i.map(r=>r==I?"indoor":"outdoor");return e.jsxs(k,{size:w,shadow:"xs",children:[e.jsx(O,{fontWeight:"600",fontSize:"lg",children:a}),n.length?e.jsx(e.Fragment,{children:e.jsx(C,{pt:"0",children:e.jsxs(ee,{isLazy:!0,variant:"unstyled",colorScheme:"teal",size:"sm",children:[e.jsxs(te,{gap:"4",flexWrap:"wrap",children:[e.jsx(Q,{size:"sm",rowGap:"2",isAttached:!0,flexWrap:"wrap",colorScheme:"teal",variant:"outline",children:t.map((r,d)=>e.jsx(se,{as:R,px:"3",borderColor:"teal.400",_selected:{bg:"teal.500",color:"white",_hover:{bg:"teal.600"}},children:r.name},d))}),e.jsx(X,{}),e.jsx(ua,{options:[I,P,W],value:i.length==2?W:i[0],onChange:r=>{l(([d])=>r==W?[d,d==I?P:I]:[r])}})]}),e.jsx(K,{mt:"4"}),e.jsx(ae,{children:t.map((r,d)=>e.jsx(ne,{h:"440px",p:"0",children:r.type=="bar"?e.jsx(Ke,{data:n||[],tooltipLabel:r.name,tickFormat:"DD MMM YYYY",offsetDomain:"day",dataKeyTypeAndFunc:o.map(u=>r.dataKeyTypeAndFunc(u))}):e.jsx(Ye,{data:n||[],tickFormat:"DD MMM YYYY",gasType:r.name,dataKeyTypeAndFunc:o.map(u=>r.dataKeyTypeAndFunc(u))})},d))})]})})}):e.jsx(y,{w:"full",pt:"5",pb:"8",children:e.jsx(c,{fontWeight:"600",color:"gray.500",fontSize:"xl",children:"Tidak Ada Data"})})]})}const ma=[{type:"bar",name:"ISPU",dataKeyTypeAndFunc:a=>({func:n=>{var t,i;return(i=(t=n[a])==null?void 0:t.ispu)==null?void 0:i[0]},envType:a})},{type:"bar",name:"ISPU PM2.5",dataKeyTypeAndFunc:a=>({func:n=>{var t,i;return(i=(t=n[a])==null?void 0:t.ispu)==null?void 0:i.find(l=>l.pollutant=="PM25")},envType:a})},{type:"bar",name:"ISPU PM10",dataKeyTypeAndFunc:a=>({func:n=>{var t,i;return(i=(t=n[a])==null?void 0:t.ispu)==null?void 0:i.find(l=>l.pollutant=="PM100")},envType:a})},{type:"line",name:"PM2.5",dataKeyTypeAndFunc:a=>({func:n=>{var t;return{value:(t=n[a])==null?void 0:t.pm25}},envType:a})},{type:"line",name:"PM10",dataKeyTypeAndFunc:a=>({func:n=>{var t;return{value:(t=n[a])==null?void 0:t.pm100}},envType:a})}],ga=[{type:"line",name:"CH4",dataKeyTypeAndFunc:a=>({func:n=>{var t;return(t=n[a])==null?void 0:t.ch4},envType:a})},{type:"line",name:"CO2",dataKeyTypeAndFunc:a=>({func:n=>{var t;return(t=n[a])==null?void 0:t.co2},envType:a})}],$={month:{inputFormat:"YYYY-MM",format:"MMMM YYYY",label:"bulan"},week:{inputFormat:"YYYY-[W]ww",format:"[ke-]ww YYYY",label:"minggu"}};function Ea(){var G,E;const[a,n]=S.useState("month"),{inputFormat:t,format:i,label:l}=$[a],[o,r]=S.useState(f().format(t)),{user:d}=U(),[u,m]=S.useState(""),s=(E=(G=d.view)==null?void 0:G.company)==null?void 0:E.companyId,p=s?`/companies/${s}/summary?type=${a}&periode=${o}`:null,{data:x}=Ce(p,we);if(!s)return e.jsx(xe,{selectCompanyOnly:!0});S.useEffect(()=>{m(p)},[p]);const M=le=>{const H=le.target.value;n(H),r(f().format($[H].inputFormat))};return e.jsxs(g,{children:[e.jsxs(v,{gap:"4",flexWrap:"wrap",align:"stretch",justify:"space-between",children:[e.jsxs(g,{children:[e.jsxs(J,{size:"lg",children:["Laporan ",l," ",f(o).format(i)]}),e.jsx(c,{color:"dimmed",children:x?`${f(x.meta.startDate).format("DD MMMM YYYY")} s/d ${f(x.meta.endDate).format("DD MMMM YYYY")}`:"Mengambil Data ..."})]}),e.jsxs(h,{flexWrap:"wrap",spacing:"2",justify:"space-between",children:[e.jsxs(g,{children:[e.jsx(c,{mb:"1",fontSize:"sm",children:"Pilih Jenis Laporan"}),e.jsxs(q,{w:"fit-content",bg:"white",fontWeight:"600",value:a,onChange:M,children:[e.jsx("option",{value:"month",children:"Laporan Bulanan"}),e.jsx("option",{value:"week",children:"Laporan Mingguan"})]})]}),e.jsxs(g,{children:[e.jsxs(c,{mb:"1",fontSize:"sm",children:["Navigasi ke ",l.toLowerCase()," lain"]}),e.jsx(pa,{state:[o,r],type:a,format:t})]})]})]}),x&&u==p?e.jsxs(b,{align:"stretch",spacing:"4",mt:"6",children:[e.jsx(T,{title:"Kualitas Udara (ISPU)",colorScheme:"telegram",icon:ea}),x.tren.length>0?e.jsxs(e.Fragment,{children:[e.jsx(ia,{indoor:x.averageData.indoor,outdoor:x.averageData.outdoor}),e.jsx(ca,{indoor:x.averageData.indoor,outdoor:x.averageData.outdoor}),e.jsx(_,{title:"Tren Kualitas Udara",tren:x.tren,paramList:ma})]}):e.jsx(N,{children:"Data Tidak Tersedia"}),e.jsx(T,{title:"Emisi Gas Rumah Kaca (CO2 dan CH4)",colorScheme:"teal",icon:aa}),x.tren.length>0?e.jsxs(e.Fragment,{children:[e.jsx(ra,{indoor:x.averageData.indoor,outdoor:x.averageData.outdoor}),e.jsx(da,{indoor:x.averageData.indoor,outdoor:x.averageData.outdoor}),e.jsx(_,{title:"Tren Emisi Gas Rumah Kaca",tren:x.tren,paramList:ga})]}):e.jsx(N,{children:"Data Tidak Tersedia"}),e.jsx(T,{title:"Aduan Di Sekitar",colorScheme:"orange",icon:Z}),e.jsx(xa,{data:x.reports,company:x.meta.company}),e.jsx(T,{title:"Catatan Kegiatan Perusahaan",colorScheme:"purple",icon:Me}),e.jsx(la,{periode:a,data:x.eventLogs,dateRange:[x.meta.startDate,x.meta.endDate]})]}):e.jsx(h,{py:"20",justify:"center",children:e.jsx(Ie,{})})]})}function T({title:a,icon:n,colorScheme:t}){return e.jsxs(h,{bg:`${t}.100`,p:"2",spacing:"0",rounded:"md",w:"fit-content",shadow:"sm",children:[e.jsx(y,{p:"1",rounded:"md",bg:`${t}.50`,color:`${t}.500`,children:e.jsx(j,{as:n,boxSize:"24px"})}),e.jsx(J,{size:"md",mx:"3",fontWeight:"600",children:a})]})}function Y({title:a,...n}){return e.jsxs(k,{size:w,shadow:"xs",flexGrow:"1",children:[a&&e.jsx(O,{fontWeight:"600",fontSize:"lg",children:a}),e.jsx(C,{pt:"0",as:oe,direction:"row",divider:e.jsx(Ge,{}),...n})]})}function N({icon:a,...n}){return e.jsx(k,{size:w,shadow:"xs",flexGrow:"1",children:e.jsxs(C,{as:h,justify:"center",py:"10",spacing:"3",color:"gray.500",children:[e.jsx(j,{as:ta,boxSize:"45px"}),e.jsx(c,{fontSize:"xl",fontWeight:"500",children:n.children})]})})}export{Y as CardSection,N as NoData,Ea as default};
