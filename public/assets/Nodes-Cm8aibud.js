import{j as e,U as u,a0 as G,Y as f}from"./font-5Mxaz-3e.js";import{u as L,z as V,b as I,f as T,L as P,F as b,D as g,q as B,O as H,Y as M,Z as W,P as w,a8 as z,w as N,C as U,W as A,Q as F}from"./app-DYChiyhM.js";import{M as O}from"./index-BbXyb5rb.js";import{G as E}from"./GMapsButton-CNOYrNRq.js";import{H as K}from"./HeadingWithIcon-BcaUOZuE.js";import{u as R,S as y}from"./useHashBasedTabsIndex-CRmJkRkw.js";import{a as Y}from"./dateFormating-uitVsAGu.js";import{I as q}from"./IconPlus-CSH41dZv.js";import{I as Q}from"./IconExternalLink-DW-fAtDQ.js";import{B as S}from"./logo-white-CsuGh6aO.js";import{G as Z}from"./chunk-JARCRF6W-CSqiEFzw.js";import{T as _,a as J,b as x}from"./chunk-4YMKQ5D4-DA2V1YAZ.js";import{T as X,a as $}from"./chunk-IAXSQ4X2-D5Bt3YnL.js";import"./logo-Byq_-Epn.js";import"./TagWithIcon-D2AD1She.js";import"./chunk-K7XRJ7NL-DKYEMZRA.js";const r=F(),h=[r.accessor("name",{header:"Nama",cell:a=>a.getValue()}),r.accessor("isUptodate",{header:"Status",cell:a=>e.jsx(z,{value:a.getValue()})}),r.accessor("address",{header:"Alamat",cell:a=>e.jsx(f,{noOfLines:2,whiteSpace:"wrap",children:a.getValue()})}),r.accessor("coordinate",{header:"Koordinat",cell:a=>e.jsx(E,{coordinate:a.getValue()})}),r.accessor("lastDataSent",{header:"Terakhir data dikirim",cell:a=>Y(a.getValue())||"-"}),r.accessor("nodeId",{header:"Aksi",cell:a=>e.jsx(N,{to:"/nodes/"+a.getValue(),children:e.jsx(S,{colorScheme:"blue",size:"sm",leftIcon:e.jsx(Q,{size:"16"}),children:"Detail"})})})],ee=[...h.slice(0,2),r.accessor("owner",{header:"Perusahaan",cell:a=>e.jsx(N,{to:"/companies/"+a.getValue().companyId,children:e.jsxs(u,{children:[e.jsx(U,{type:a.getValue().type}),e.jsx(f,{children:a.getValue().name})]})})}),...h.slice(4)];function be(){const{roleIs:a}=L(),l=V(),i=[{label:"Daftar Node Publik",key:"public"},{label:"Daftar Node Privat",key:"private"},{label:"Lihat Dalam Maps",key:"map"}],s=a("manager")?[i[1]]:i,[c,d]=R(s.map(o=>o.key)),{data:t}=I("/nodes/overview",T);if(!t)return e.jsx(P,{});const p=[{label:"Status Node",data:t.status,flex:"1 0 100px"},{label:"Kepemilikan Node",data:t.ownership,flex:"1 0 100px"}];return e.jsxs(b,{gap:"2",flexDir:"column",children:[e.jsxs(u,{w:"full",spacing:"4",align:"start",wrap:"wrap",children:[e.jsx(K,{Icon:e.jsx(g,{}),text:"Daftar Node"}),e.jsx(B,{flexGrow:"999"}),e.jsxs(u,{wrap:"wrap",justify:"end",flexBasis:"450px",flexGrow:"1",children:[e.jsx(H,{w:"225px",flex:"1 0 ",bg:"white",placeholder:"Cari ..",_onSubmit:null}),a("admin")&&e.jsx(S,{leftIcon:e.jsx(q,{size:"20px"}),colorScheme:"green",children:"Tambah Node",onClick:()=>l("./create")})]})]}),e.jsxs(b,{mt:"2",gap:"2",direction:["column","row"],justify:"space-between",align:"stretch",children:[e.jsx(y,{height:"initial",flexBasis:["100px","150px",null,"200px"],icon:g,count:t.all,label:"Total Node",variant:"solid",bg:"blue.400"}),p.map(({label:o,data:n,flex:m})=>e.jsxs(G,{flex:m,p:"2",rounded:"md",border:"1px solid",borderColor:"gray.300",children:[e.jsx(f,{fontWeight:"600",mb:"1",children:o}),e.jsx(Z,{gap:"3",gridTemplateColumns:"repeat(auto-fit, minmax(100px, 1fr))",children:n.map((j,k)=>{const{color:D,name:v,icon:C}={...M,...W}[j.value];return e.jsx(y,{flex:"1 0 180px",icon:C,color:D,count:j.count,label:v},k)})})]},o))]}),e.jsxs(_,{display:"flex",flexDir:"column",flexGrow:"1",index:c,onChange:d,isLazy:!0,children:[e.jsx(X,{flexWrap:"wrap",rowGap:"4px",children:s.map(o=>e.jsx($,{children:o.label},o.key))}),e.jsxs(J,{flexGrow:"1",children:[e.jsx(x,{px:"0",children:e.jsx(w,{flexGrow:"1",apiUrl:"/nodes?ownship=public",columns:h})}),e.jsx(x,{px:"0",children:e.jsx(w,{flexGrow:"1",apiUrl:"/nodes?ownship=private",columns:ee})}),e.jsx(x,{px:"0",pb:"0",flexGrow:"1",children:e.jsx(ae,{})})]})]})]})}function ae(){const{data:a}=I("/nodes?all=true",T),l="450px";if(!a)return e.jsx(A,{h:l,rounded:"md"});const i=Object.values(a.rows.filter(s=>s.companyId&&s.owner).reduce((s,c)=>{const{coordinate:d,owner:t,...p}=c,{name:o,companyId:n,type:m}=t;return s[n]||(s[n]={name:o,companyId:n,type:m,coordinate:d,indoorNodes:[]}),s[n].indoorNodes.push(p),s},{}));return e.jsx(O,{h:l,companiesData:i,data:a.rows.filter(s=>!s.companyId)})}export{ee as columPrivateNodeTable,be as default};
